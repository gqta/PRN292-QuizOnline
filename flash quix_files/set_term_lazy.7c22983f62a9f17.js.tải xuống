(window.QJP=window.QJP||[]).push([["set_term_lazy"],{"1Cun":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("zKZe");var a=r("QR21"),n=r("og3H"),s=r("zK28");function i(e,t){void 0===t&&(t={});var r=Object.assign({agent:window.navigator.userAgent,client_term_id:e.termId,language:e.language,platform:n.J.WEB,playback_action:e.playbackAction,term_side:e.termSide,user_id:s.a.user&&s.a.user.id},t);Object(a.a)("audio_playback_events",r,{includeUserDetails:!0})}},"4CRz":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return g}));var a=r("6MTt"),n=r("MQiV"),s=r("78K5"),i=r("Nxgj"),o=r("EwE0"),u=r("t1Ez"),l=r("bvRJ"),d=r("q1tI"),c=r.n(d),p=r("qpvQ"),h=r("dHOp");function g(t){var r,d={customParams:{signupOrigin:"set-page-signup-modal"}},g=c.a.createElement(i.a,{googleLoginUrl:Object(h.c)(d),key:"google",label:e("signup_wall_inline.google"),onClick:t.onGoogleSignupButtonClicked,variant:"small"}),m=c.a.createElement(s.a,{facebookLoginUrl:Object(h.b)(d),icon:c.a.createElement(l.a,{icon:"facebook-round"}),key:"facebook",label:e("signup_wall_inline.facebook"),onClick:t.onFacebookSignupButtonClicked,variant:"small"}),_=c.a.createElement(n.a,{icon:"mail-filled",key:"email",onClick:t.onEmailSignupButtonClicked,variant:"social"},c.a.createElement(u.a,{id:"signup_wall_inline.cta"}));switch(a.b.getVariationAndEnroll("SetPageTermsWallSignupOptionsReorder[default,growth]")){case"variant1":r=[g,_,m];break;case"variant2":r=[_,g,m];break;default:r=[g,m,_]}return c.a.createElement(o.a,{subtitle:c.a.createElement(u.a,{id:"signup_wall_inline.subtitle"}),title:c.a.createElement(u.a,{id:"signup_wall_inline.title"})},r.map((e=>c.a.createElement("div",{className:"SignupWallInline-signupButton",key:e.key},e))),c.a.createElement("div",{className:"SignupWallInline-login"},c.a.createElement(p.a,{cta:c.a.createElement(u.a,{id:"global.sign_up_modal.already_have_account"}),link:c.a.createElement(u.a,{id:"global.sign_up_modal.log_in_link"}),onClickLogin:t.onLoginLinkClicked})))}}.call(this,r("nrsj").default)},"7zzx":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var a=r("pVnL"),n=r.n(a),s=r("8OQS"),i=r.n(s),o=r("6grX"),u=r("wLt/"),l=r("lG1/"),d=r("t1Ez"),c=r("ifSZ"),p=(r("5s+n"),r("mr8R")),h=Object(p.a)((()=>Promise.all([r.e("rich_text_editing"),r.e("common"),r.e("rich_text_editor_lazy")]).then(r.bind(null,"vm/G")))),g=r("q1tI"),m=r.n(g),_=r("RvVp"),f=r("mmUd");class S extends m.a.Component{constructor(e){super(e),this.handleEditorChange=e=>{"rich"in e?this.updateEditorValue({plain:e.plain,rich:e.rich?e.rich:Object(_.c)(e.plain)}):"currentTarget"in e&&this.updateEditorValue({plain:e.currentTarget.value,rich:Object(_.c)(e.currentTarget.value)})},this.state={editorValue:this.getInitialEditorValue()}}componentDidMount(){this.props.autoFocus&&this.props.isEditing&&this.focusTextarea()}UNSAFE_componentWillReceiveProps(e){!this.props.isEditing&&e.isEditing&&this.updateEditorValue(this.getInitialEditorValue())}componentDidUpdate(e){this.props.autoFocus&&!e.isEditing&&this.props.isEditing&&this.focusTextarea()}getEditLabel(){return this.props.shouldUseLanguageLabel?Object(c.a)(this.props.lang):this.props.side===u.b?m.a.createElement(d.a,{id:"global.inline_edit.edit_term"}):m.a.createElement(d.a,{id:"global.inline_edit.edit_definition"})}getInitialEditorValue(){return this.props.side===u.b?{plain:this.props.term.word,rich:this.props.term.wordRichText}:{plain:this.props.term.definition,rich:this.props.term.definitionRichText}}render(){if(this.props.isEditing&&(this.props.canEditRichText||Object(f.a)()))return m.a.createElement(h,{alwaysShowToolbar:!0,autofocus:!1,canEditRichText:!!this.props.canEditRichText,isEmbeddedInline:!0,lang:this.props.lang,languageCodes:[this.props.lang],onChange:this.handleEditorChange,onEditorKeyDown:this.props.onRichTextKeyDown,plainText:this.state.editorValue.plain,pmJson:this.state.editorValue.rich,ref:e=>{this.richTextEditor=e}});if(this.props.isEditing){var e=this.getEditLabel(),t=this.props,r=i()(t,["autoFocus","canEditRichText","isEditing","onChange","onRichTextKeyDown","side","term","shouldUseLanguageLabel","shouldShowRichText"]);return m.a.createElement(l.a,n()({},r,{label:e,languageCodes:[this.props.lang],onChange:this.handleEditorChange,ref:e=>{this.uiTextarea=e},value:this.state.editorValue.plain}))}var a=this.props,s=i()(a,["autoFocus","isEditing","onChange","shouldUseLanguageLabel"]);return m.a.createElement(u.c,n()({allowRtl:!0},s))}focusTextarea(){this.uiTextarea&&this.uiTextarea.focus(o.b.FOCUS_END)}updateEditorValue(e){this.setState({editorValue:e}),this.props.onChange(e)}}S.defaultProps={autoFocus:!1}},"8xMa":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("xisi");function n(e,t,r,n){a.a.put("/webapi/3.2/terms/"+e).send({data:[t]}).accept("application/json").credentials().setXRequestWith().end(((e,t)=>{e&&n?n(e):null!=t&&t.body&&r(t.body)}))}},EwE0:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r("TSYQ"),n=r.n(a),s=r("Pxp3"),i=r("FFEN"),o=r("q1tI"),u=r.n(o);class l extends o.PureComponent{render(){var{variant:e,title:t,subtitle:r,children:a}=this.props,o=n()("SetPageWall",{["SetPageWall--"+e]:e});return u.a.createElement("div",{className:o},u.a.createElement("div",{className:"SetPageWall-overlay"}),u.a.createElement("div",{className:"SetPageWall-container"},u.a.createElement("div",{className:"SetPageWall-text"},u.a.createElement(i.a,{size:2},t),r&&u.a.createElement(s.a,null,r)),u.a.createElement("div",{className:"SetPageWall-cta"},a)))}}l.defaultProps={variant:"normal"}},HPId:function(e,t,r){"use strict";var a=r("t1Ez"),n=r("AQxD"),s=r("q1tI"),i=r.n(s);t.a=e=>{var{distractorCount:t}=e;return i.a.createElement("div",{className:"SetPageCustomDistractorBadge"},i.a.createElement(n.a,null,i.a.createElement(a.a,{distractorCount:t,id:"set_page.custom_distractor_badge"})))}},HlzF:function(e,t,r){(function(a){var n;r("yXV3"),r("4mDm"),r("+2oP"),r("pDQq"),r("rOQg"),r("5s+n"),r("Rm1S"),r("UxlC"),r("EnZy"),r("XMab"),r("s5qe"),r("FZtP"),
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||s;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||s;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,s.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var a=t._howls[r]._getSoundIds(),n=0;n<a.length;n++){var i=t._howls[r]._soundById(a[n]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||s;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,s.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var a=t._howls[r]._getSoundIds(),n=0;n<a.length;n++){var i=t._howls[r]._soundById(a[n]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},stop:function(){for(var e=this||s,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||s,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||s)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||s;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||s,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(i){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),a=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=a&&parseInt(a[0].split("/")[1],10)<33;return e._codecs={mp3:!(n||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||s;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var a=new Audio;a._unlocked=!0,e._releaseHtml5Audio(a)}catch(r){e.noAudio=!0;break}for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var s=e._howls[n]._getSoundIds(),i=0;i<s.length;i++){var o=e._howls[n]._soundById(s[i]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||s;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||s;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&s.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var s=new r,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return s.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=s.usingWebAudio&&!t._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(s.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var a,n;if(e._format&&e._format[r])a=e._format[r];else{if("string"!=typeof(n=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(a=/^data:audio\/([^;,]+);/i.exec(n))||(a=/\.([^.]+)$/.exec(n.split("?",1)[0])),a&&(a=a[1].toLowerCase())}if(a||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),a&&s.codecs(a)){t=e._src[r];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&l(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var r=this,a=null;if("number"==typeof e)a=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e&&(e="__default",!r._playLock)){for(var n=0,i=0;i<r._sounds.length;i++)r._sounds[i]._paused&&!r._sounds[i]._ended&&(n++,a=r._sounds[i]._id);1===n?e=null:a=null}}var o=a?r._soundById(a):r._inactiveSound();if(!o)return null;if(a&&!e&&(e=o._sprite||"__default"),"loaded"!==r._state){o._sprite=e,o._ended=!1;var u=o._id;return r._queue.push({event:"play",action:function(){r.play(u)}}),u}if(a&&!o._paused)return t||r._loadQueue("play"),o._id;r._webAudio&&s._autoResume();var l=Math.max(0,o._seek>0?o._seek:r._sprite[e][0]/1e3),d=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-l),c=1e3*d/Math.abs(o._rate),p=r._sprite[e][0]/1e3,h=(r._sprite[e][0]+r._sprite[e][1])/1e3;o._sprite=e,o._ended=!1;var g=function(){o._paused=!1,o._seek=l,o._start=p,o._stop=h,o._loop=!(!o._loop&&!r._sprite[e][2])};if(!(l>=h)){var m=o._node;if(r._webAudio){var _=function(){r._playLock=!1,g(),r._refreshBuffer(o);var e=o._muted||r._muted?0:o._volume;m.gain.setValueAtTime(e,s.ctx.currentTime),o._playStart=s.ctx.currentTime,void 0===m.bufferSource.start?o._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,d):o._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,d),c!==1/0&&(r._endTimers[o._id]=setTimeout(r._ended.bind(r,o),c)),t||setTimeout((function(){r._emit("play",o._id),r._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?_():(r._playLock=!0,r.once("resume",_),r._clearTimer(o._id))}else{var f=function(){m.currentTime=l,m.muted=o._muted||r._muted||s._muted||m.muted,m.volume=o._volume*s.volume(),m.playbackRate=o._rate;try{var a=m.play();if(a&&"undefined"!=typeof Promise&&(a instanceof Promise||"function"==typeof a.then)?(r._playLock=!0,g(),a.then((function(){r._playLock=!1,m._unlocked=!0,t||(r._emit("play",o._id),r._loadQueue())})).catch((function(){r._playLock=!1,r._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):t||(r._playLock=!1,g(),r._emit("play",o._id),r._loadQueue()),m.playbackRate=o._rate,m.paused)return void r._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||o._loop?r._endTimers[o._id]=setTimeout(r._ended.bind(r,o),c):(r._endTimers[o._id]=function(){r._ended(o),m.removeEventListener("ended",r._endTimers[o._id],!1)},m.addEventListener("ended",r._endTimers[o._id],!1))}catch(n){r._emit("playerror",o._id,n)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=r._src,m.load());var S=window&&window.ejecta||!m.readyState&&s._navigator.isCocoonJS;if(m.readyState>=3||S)f();else{r._playLock=!0;m.addEventListener(s._canPlayEvent,(function e(){f(),m.removeEventListener(s._canPlayEvent,e,!1)}),!1),r._clearTimer(o._id)}}return o._id}r._ended(o)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),a=0;a<r.length;a++){t._clearTimer(r[a]);var n=t._soundById(r[a]);if(n&&!n._paused&&(n._seek=t.seek(r[a]),n._rateSeek=0,n._paused=!0,t._stopFade(r[a]),n._node))if(t._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),t._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||t._emit("pause",n?n._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var a=r._getSoundIds(e),n=0;n<a.length;n++){r._clearTimer(a[n]);var s=r._soundById(a[n]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,r._stopFade(a[n]),s._node&&(r._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),r._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&r._clearSound(s._node))),t||r._emit("stop",s._id))}return r},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(void 0===t){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var a=r._getSoundIds(t),n=0;n<a.length;n++){var i=r._soundById(a[n]);i&&(i._muted=e,i._interval&&r._stopFade(i._id),r._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,s.ctx.currentTime):i._node&&(i._node.muted=!!s._muted||e),r._emit("mute",i._id))}return r},volume:function(){var e,t,r,a=this,n=arguments;if(0===n.length)return a._volume;if(1===n.length||2===n.length&&void 0===n[1]){var i=a._getSoundIds(),o=i.indexOf(n[0]);o>=0?t=parseInt(n[0],10):e=parseFloat(n[0])}else n.length>=2&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(r=t?a._soundById(t):a._sounds[0])?r._volume:0;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,n)}}),a;void 0===t&&(a._volume=e),t=a._getSoundIds(t);for(var u=0;u<t.length;u++)(r=a._soundById(t[u]))&&(r._volume=e,n[2]||a._stopFade(t[u]),a._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,s.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*s.volume()),a._emit("volume",r._id));return a},fade:function(e,t,r,a){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"fade",action:function(){n.fade(e,t,r,a)}}),n;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),n.volume(e,a);for(var i=n._getSoundIds(a),o=0;o<i.length;o++){var u=n._soundById(i[o]);if(u){if(a||n._stopFade(i[o]),n._webAudio&&!u._muted){var l=s.ctx.currentTime,d=l+r/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,d)}n._startFadeInterval(u,e,t,r,i[o],void 0===a)}}return n},_startFadeInterval:function(e,t,r,a,n,s){var i=this,o=t,u=r-t,l=Math.abs(u/.01),d=Math.max(4,l>0?a/l:a),c=Date.now();e._fadeTo=r,e._interval=setInterval((function(){var n=(Date.now()-c)/a;c=Date.now(),o+=u*n,o=Math.round(100*o)/100,o=u<0?Math.max(r,o):Math.min(r,o),i._webAudio?e._volume=o:i.volume(o,e._id,!0),s&&(i._volume=o),(r<t&&o<=r||r>t&&o>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(r,e._id),i._emit("fade",e._id))}),d)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,r,a=this,n=arguments;if(0===n.length)return a._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(r=a._soundById(parseInt(n[0],10)))&&r._loop;e=n[0],a._loop=e}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var s=a._getSoundIds(t),i=0;i<s.length;i++)(r=a._soundById(s[i]))&&(r._loop=e,a._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e,e&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop)));return a},rate:function(){var e,t,r,a=this,n=arguments;if(0===n.length)t=a._sounds[0]._id;else if(1===n.length){var i=a._getSoundIds(),o=i.indexOf(n[0]);o>=0?t=parseInt(n[0],10):e=parseFloat(n[0])}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if("number"!=typeof e)return(r=a._soundById(t))?r._rate:a._rate;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,n)}}),a;void 0===t&&(a._rate=e),t=a._getSoundIds(t);for(var u=0;u<t.length;u++)if(r=a._soundById(t[u])){a.playing(t[u])&&(r._rateSeek=a.seek(t[u]),r._playStart=a._webAudio?s.ctx.currentTime:r._playStart),r._rate=e,a._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(e,s.ctx.currentTime):r._node&&(r._node.playbackRate=e);var l=a.seek(t[u]),d=(a._sprite[r._sprite][0]+a._sprite[r._sprite][1])/1e3-l,c=1e3*d/Math.abs(r._rate);!a._endTimers[t[u]]&&r._paused||(a._clearTimer(t[u]),a._endTimers[t[u]]=setTimeout(a._ended.bind(a,r),c)),a._emit("rate",r._id)}return a},seek:function(){var e,t,r=this,a=arguments;if(0===a.length)t=r._sounds[0]._id;else if(1===a.length){var n=r._getSoundIds(),i=n.indexOf(a[0]);i>=0?t=parseInt(a[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(a[0]))}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(void 0===t)return r;if("number"==typeof e&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var o=r._soundById(t);if(o){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var u=r.playing(t)?s.ctx.currentTime-o._playStart:0,l=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(l+u*Math.abs(o._rate))}return o._node.currentTime}var d=r.playing(t);d&&r.pause(t,!0),o._seek=e,o._ended=!1,r._clearTimer(t),r._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=e);var c=function(){r._emit("seek",t),d&&r.play(t,!0)};if(d&&!r._webAudio){var p=function e(){r._playLock?setTimeout(e,0):c()};setTimeout(p,0)}else c()}return r},playing:function(e){var t=this;if("number"==typeof e){var r=t._soundById(e);return!!r&&!r._paused}for(var a=0;a<t._sounds.length;a++)if(!t._sounds[a]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,a=t._soundById(e);return a&&(r=t._sprite[a._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(s._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),s._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var a=s._howls.indexOf(e);a>=0&&s._howls.splice(a,1);var n=!0;for(r=0;r<s._howls.length;r++)if(s._howls[r]._src===e._src||e._src.indexOf(s._howls[r]._src)>=0){n=!1;break}return u&&n&&delete u[e._src],s.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,a){var n=this["_on"+e];return"function"==typeof t&&n.push(a?{id:r,fn:t,once:a}:{id:r,fn:t}),this},off:function(e,t,r){var a=this,n=a["_on"+e],s=0;if("number"==typeof t&&(r=t,t=null),t||r)for(s=0;s<n.length;s++){var i=r===n[s].id;if(t===n[s].fn&&i||!t&&i){n.splice(s,1);break}}else if(e)a["_on"+e]=[];else{var o=Object.keys(a);for(s=0;s<o.length;s++)0===o[s].indexOf("_on")&&Array.isArray(a[o[s]])&&(a[o[s]]=[])}return a},once:function(e,t,r){return this.on(e,t,r,1),this},_emit:function(e,t,r){for(var a=this,n=a["_on"+e],s=n.length-1;s>=0;s--)n[s].id&&n[s].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(a,n[s].fn),0),n[s].once&&a.off(e,n[s].fn,n[s].id));return a._loadQueue(e),a},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var a=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&a&&t.stop(e._id,!0).play(e._id),t._webAudio&&a){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),n)}return t._webAudio&&!a&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),s._autoSuspend()),t._webAudio||a||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,r=0,a=0;if(!(e._sounds.length<t)){for(a=0;a<e._sounds.length;a++)e._sounds[a]._ended&&r++;for(a=e._sounds.length-1;a>=0;a--){if(r<=t)return;e._sounds[a]._ended&&(e._webAudio&&e._sounds[a]._node&&e._sounds[a]._node.disconnect(0),e._sounds.splice(a,1),r--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],r=0;r<this._sounds.length;r++)t.push(this._sounds[r]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,s.ctx.currentTime),this},_cleanBuffer:function(e){var t=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=s._scratchBuffer}catch(r){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=s._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),e._node.gain.setValueAtTime(r,s.ctx.currentTime),e._node.paused=!0,e._node.connect(s.masterGain)):s.noAudio||(e._node=s._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(s._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=r*s.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(s._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var u={},l=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),a=new Uint8Array(r.length),n=0;n<r.length;++n)a[n]=r.charCodeAt(n);c(a.buffer,e)}else{var s=new XMLHttpRequest;s.open(e._xhr.method,t,!0),s.withCredentials=e._xhr.withCredentials,s.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){s.setRequestHeader(t,e._xhr.headers[t])})),s.onload=function(){var t=(s.status+"")[0];"0"===t||"2"===t||"3"===t?c(s.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},d(s)}},d=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&t._sounds.length>0?(u[t._src]=e,p(t,e)):r()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(e).then(a).catch(r):s.ctx.decodeAudioData(e,a,r)},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(n){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),t=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var a=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!a&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(n=function(){return{Howler:s,Howl:i}}.apply(t,[]))||(e.exports=n),t.Howler=s,t.Howl=i,void 0!==a?(a.HowlerGlobal=r,a.Howler=s,a.Howl=i,a.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=s,window.Howl=i,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var r=t._howls.length-1;r>=0;r--)t._howls[r].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,r){var a=this;return a.ctx&&a.ctx.listener?(t="number"!=typeof t?a._pos[1]:t,r="number"!=typeof r?a._pos[2]:r,"number"!=typeof e?a._pos:(a._pos=[e,t,r],void 0!==a.ctx.listener.positionX?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]),a)):a},HowlerGlobal.prototype.orientation=function(e,t,r,a,n,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;var o=i._orientation;return t="number"!=typeof t?o[1]:t,r="number"!=typeof r?o[2]:r,a="number"!=typeof a?o[3]:a,n="number"!=typeof n?o[4]:n,s="number"!=typeof s?o[5]:s,"number"!=typeof e?o:(i._orientation=[e,t,r,a,n,s],void 0!==i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(e,t,r,a,n,s),i)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._stereo=t.stereo||null,r._pos=t.pos||null,r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},r._onstereo=t.onstereo?[{fn:t.onstereo}]:[],r._onpos=t.onpos?[{fn:t.onpos}]:[],r._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(e,r)}}),a;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===r){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0]}for(var s=a._getSoundIds(r),i=0;i<s.length;i++){var o=a._soundById(s[i]);if(o){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||t(o,n),"spatial"===n?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(e,0,0):o._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),a._emit("stereo",o._id)}}return a},Howl.prototype.pos=function(e,r,a,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,r,a,n)}}),s;if(r="number"!=typeof r?0:r,a="number"!=typeof a?-.5:a,void 0===n){if("number"!=typeof e)return s._pos;s._pos=[e,r,a]}for(var i=s._getSoundIds(n),o=0;o<i.length;o++){var u=s._soundById(i[o]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,r,a],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setPosition(e,r,a)),s._emit("pos",u._id)}}return s},Howl.prototype.orientation=function(e,r,a,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,r,a,n)}}),s;if(r="number"!=typeof r?s._orientation[1]:r,a="number"!=typeof a?s._orientation[2]:a,void 0===n){if("number"!=typeof e)return s._orientation;s._orientation=[e,r,a]}for(var i=s._getSoundIds(n),o=0;o<i.length;o++){var u=s._soundById(i[o]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,r,a],u._node&&(u._panner||(u._pos||(u._pos=s._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setOrientation(e,r,a)),s._emit("orientation",u._id)}}return s},Howl.prototype.pannerAttr=function(){var e,r,a,n=this,s=arguments;if(!n._webAudio)return n;if(0===s.length)return n._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(a=n._soundById(parseInt(s[0],10)))?a._pannerAttr:n._pannerAttr;e=s[0],void 0===r&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:n._panningModel})}else 2===s.length&&(e=s[0],r=parseInt(s[1],10));for(var i=n._getSoundIds(r),o=0;o<i.length;o++)if(a=n._soundById(i[o])){var u=a._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var l=a._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(a._pos||(a._pos=n._pos||[0,0,-.5]),t(a,"spatial"))}return n},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this),t._stereo?r.stereo(t._stereo):t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,t._stereo?r.stereo(t._stereo):t._pos?r.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,r._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,r("yLpj"))},IOLr:function(e,t,r){"use strict";r.r(t);var a=r("Y9jf"),n=r("Ef4P"),s=r("Vg22"),i=r("pn57"),o=r("peh1"),u=r("CBLk"),l=r("wRpB"),d=Object(o.createStructuredSelector)({alphabeticalIsDifferent:l.a,alphabeticalOrder:l.b,canAccessStudyableFeatures:l.e,canEditRichText:l.h,canEditSet:l.i,customDistractorCountByTermId:l.s,hasAnyAnswers:l.G,isDiagramSet:l.ab,isDiagramSetLoadError:l.bb,isPopularSetByViews:l.xb,originalOrder:l.Wb,selectedOnly:l.jc,set:l.lc,setPageMultipleEmbeddedAdsDesktopMaxAds:l.oc,setPageMultipleEmbeddedAdsDesktopMinTerms:l.pc,setPageMultipleEmbeddedAdsDesktopSpacing:l.qc,setPageMultipleEmbeddedAdsDesktopStartPosition:l.rc,setPageMultipleEmbeddedAdsMobileMaxAds:l.sc,setPageMultipleEmbeddedAdsMobileMinTerms:l.tc,setPageMultipleEmbeddedAdsMobileSpacing:l.uc,setPageMultipleEmbeddedAdsMobileStartPosition:l.vc,setPaths:l.wc,shouldShowAd:l.Dc,shouldShowRichText:l.Oc,shouldShowSignupWall:l.Sc,shouldShowStickyBannerWithStudyButtons:l.Tc,showVerifiedUI:l.cd,termIdToIsSelectedMap:l.sd,termIdToTermsMap:l.vd,termSort:l.td,user:l.Ad,yourStatsChunks:l.Id});t.default=Object(s.connect)(d,(e=>({actions:Object(i.bindActionCreators)({changeTermSort:u.f,openSignupModal:u.I,openSignupModalLogin:u.J,changeIsSelectedOnly:u.e,writePreference:u.N},e)})),null,{context:n.a,forwardRef:!0})(a.a)},KYVs:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r("4mDm"),r("3bBZ");var a=r("rfz2"),n=r("t1Ez"),s=r("FFEN"),i=r("bvRJ"),o=r("z0Hl"),u=r("q1tI"),l=r.n(u);class d extends l.a.PureComponent{constructor(){super(...arguments),this.handleSelectAll=()=>{this.props.onSelectAll(this.props.shortName,!this.props.hasAllSelected)}}getSelectButtonText(){return this.props.hasAllSelected?this.props.hasSomeSelected?l.a.createElement(n.a,{id:"set_page.term_chunks.deselect_all_starred_terms",numTerms:this.props.termCount}):l.a.createElement(n.a,{id:"set_page.term_chunks.deselect_these_starred_terms",numTerms:this.props.termCount}):this.props.hasSomeSelected?l.a.createElement(n.a,{id:"set_page.term_chunks.select_all_starred_terms",numTerms:this.props.termCount}):l.a.createElement(n.a,{id:"set_page.term_chunks.select_these_starred_terms",numTerms:this.props.termCount})}renderSelectedAllFilter(e){return l.a.createElement("div",{className:"SetPageTermChunk-selectAll"},l.a.createElement(o.a,{checked:this.props.hasAllSelected,onChange:this.handleSelectAll},l.a.createElement(i.a,{icon:e}),this.getSelectButtonText()))}render(){var e=this.props.hasAllSelected?"star":"star-empty";return l.a.createElement("div",{className:"SetPageTermChunk SetPageTermChunk--"+this.props.shortName},l.a.createElement("div",{className:"SetPageTermChunk-header"},l.a.createElement("div",{className:"SetPageTermChunk-heading"},l.a.createElement("span",{className:"SetPageTermChunk-title"},l.a.createElement(s.a,{deprecatedStyle:!0,size:4},this.props.title," (",this.props.termCount,")")),l.a.createElement("span",{className:"SetPageTermChunk-subtitle"},l.a.createElement(a.a,{component:"span",dangerouslySetInnerHTML:{__html:this.props.subtitle}}))),this.props.disableSelectedAllFilter?null:this.renderSelectedAllFilter(e)),this.props.children)}}},LGqQ:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var a=r("TSYQ"),n=r.n(a),s=r("q1tI"),i=r.n(s);function o(e){var{hasAdz:t=!1,children:r}=e,a=n()("SetPageTermsStickyBanner",{"SetPageTermsStickyBanner--hasAdz":t});return i.a.createElement("div",{className:a},i.a.createElement("div",{className:"SetPageTermsStickyBanner-container"},r))}var u=r("gOfv"),l=r("t1Ez"),d=r("FFEN"),c=r("T3U7");function p(){Object(c.a)("set_page_sticky_banner_for_study_mode_flashcards_clicked")}function h(){Object(c.a)("set_page_sticky_banner_for_study_mode_learn_clicked")}function g(){Object(c.a)("set_page_sticky_banner_for_study_mode_match_clicked")}function m(e){return s.createElement(o,{hasAdz:e.hasAdz},s.createElement("div",{className:"SetPageStudyModesBanner-body"},s.createElement("div",{className:"SetPageStudyModesBanner-inner"},s.createElement("div",{className:"SetPageStudyModesBanner-text"},s.createElement(d.a,{deprecatedStyle:!0,size:4},s.createElement(l.a,{id:"set_page.sticky_banner_with_study_buttons.title"})),s.createElement("p",{className:"SetPageStudyModesBanner-subtitle"},s.createElement(l.a,{id:"set_page.sticky_banner_with_study_buttons.subtitle"}))),s.createElement("div",{className:"SetPageStudyModesBanner-cta"},s.createElement("div",{className:"SetPage-studyModeButtons"},s.createElement(u.a,{onClick:p,setId:e.set.id,variant:"small"})),s.createElement("div",{className:"SetPage-studyModeButtons"},s.createElement(u.c,{onClick:h,setId:e.set.id,variant:"small"})),s.createElement("div",{className:"SetPage-studyModeButtons"},s.createElement(u.e,{onClick:g,setId:e.set.id,variant:"small"}))))))}},M0cf:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r("4mDm"),r("3bBZ");var a=r("JYcJ"),n=r("3Sfj"),s=r("ykUF"),i=r("TSYQ"),o=r.n(i),u=r("x+ut"),l=r("zK28"),d=r("q1tI"),c=r.n(d);class p extends c.a.Component{constructor(){var e;super(...arguments),this.state={adType:"",isAdHidden:!1,shouldUseAscendeum:!(null==(e=l.a.adConfig)||!e.shouldUseAscendeum)},this.handleEmptyCallback=()=>{this.setState({isAdHidden:!0})},this.handleAdTypeCallback=()=>{this.setState({adType:s.NATIVE})},this.renderAd=e=>this.state.shouldUseAscendeum?c.a.createElement(n.a,{headingAlignment:"centerAlign",id:e,onEmptyAdCallback:this.handleEmptyCallback}):c.a.createElement(u.a,{headingAlignment:"centerAlign",hideAdTimeout:1e3,id:e,onEmptyAdCallback:this.handleEmptyCallback,onNativeAd:this.handleAdTypeCallback})}render(){var{id:e,termSort:t}=this.props,{adType:r,isAdHidden:a}=this.state;if(a)return null;var n=o()("SetPageTerms-embeddedDesktopAdWrapper",{"SetPageTerms-fullFrame":r===s.NATIVE});return c.a.createElement("div",{className:n},c.a.createElement("div",{className:"SetPageTerms-embeddedDesktopAdz",key:"embedded-desktop-adz-"+t},this.renderAd(e)))}}class h extends c.a.Component{constructor(){var e;super(...arguments),this.state={adType:"",isAdHidden:!1,shouldUseAscendeum:!(null==(e=l.a.adConfig)||!e.shouldUseAscendeum)},this.handleEmptyCallback=()=>{this.setState({isAdHidden:!0})},this.handleAdTypeCallback=()=>{this.setState({adType:s.NATIVE})},this.renderAd=e=>this.state.shouldUseAscendeum?c.a.createElement(n.a,{id:e,onEmptyAdCallback:this.handleEmptyCallback}):c.a.createElement(u.a,{hideAdTimeout:1e3,id:e,onEmptyAdCallback:this.handleEmptyCallback,onNativeAd:this.handleAdTypeCallback,upgradeSource:"mweb_remove_ad"})}render(){var{id:e,termSort:t}=this.props,{adType:r,isAdHidden:a}=this.state;if(a)return null;var n=o()("SetPageTerms-embeddedMobileAdWrapper",{"SetPageTerms-fullFrame":r===s.NATIVE});return c.a.createElement("div",{className:n},c.a.createElement("div",{className:"SetPageTerms-embeddedMobileAdz",key:"embedded-adz-"+t},this.renderAd(e)))}}var g=(e,t,r,a,n,s)=>{var i=((e,t,r,a,n)=>{if(e<a||r<1||t<0)return 0;var s=e-2*(t+1);return Math.min(Math.min(Math.floor(s/r)+1,n),10)})(t,r,a,n,s);return!(Math.floor((e-r)/a)>=i)&&((e,t,r)=>e>=t&&(e-t)%r==0)(e,r,a)};class m extends c.a.PureComponent{constructor(){super(...arguments),this.getDesktopAdsIds=()=>[a.SET_PAGE_EMBED_DESKTOP_MULTI_01,a.SET_PAGE_EMBED_DESKTOP_MULTI_02,a.SET_PAGE_EMBED_DESKTOP_MULTI_03,a.SET_PAGE_EMBED_DESKTOP_MULTI_04,a.SET_PAGE_EMBED_DESKTOP_MULTI_05,a.SET_PAGE_EMBED_DESKTOP_MULTI_06,a.SET_PAGE_EMBED_DESKTOP_MULTI_07,a.SET_PAGE_EMBED_DESKTOP_MULTI_08,a.SET_PAGE_EMBED_DESKTOP_MULTI_09,a.SET_PAGE_EMBED_DESKTOP_MULTI_10],this.getMWebAdsIds=()=>[a.SET_PAGE_EMBED_MWEB_MULTI_01,a.SET_PAGE_EMBED_MWEB_MULTI_02,a.SET_PAGE_EMBED_MWEB_MULTI_03,a.SET_PAGE_EMBED_MWEB_MULTI_04,a.SET_PAGE_EMBED_MWEB_MULTI_05,a.SET_PAGE_EMBED_MWEB_MULTI_06,a.SET_PAGE_EMBED_MWEB_MULTI_07,a.SET_PAGE_EMBED_MWEB_MULTI_08,a.SET_PAGE_EMBED_MWEB_MULTI_09,a.SET_PAGE_EMBED_MWEB_MULTI_10],this.renderDesktopAdIfPossible=()=>{var{setPageMultipleEmbeddedAdsDesktopMaxAds:e,setPageMultipleEmbeddedAdsDesktopMinTerms:t,setPageMultipleEmbeddedAdsDesktopStartPosition:r,setPageMultipleEmbeddedAdsDesktopSpacing:a,setTermCount:n,setTermIndex:s}=this.props,i=s;if(g(i,n,r,a,t,e)){var o=Math.floor((i-r)/a);return this.renderEmbeddedDesktopAd(this.getDesktopAdsIds()[o])}return null},this.renderMwebAdIfPossible=()=>{var{setPageMultipleEmbeddedAdsMobileMinTerms:e,setPageMultipleEmbeddedAdsMobileMaxAds:t,setPageMultipleEmbeddedAdsMobileStartPosition:r,setPageMultipleEmbeddedAdsMobileSpacing:a,setTermCount:n,setTermIndex:s}=this.props,i=s;if(g(i,n,r,a,e,t)){var o=Math.floor((i-r)/a);return this.renderMobileWebEmbeddedAd(this.getMWebAdsIds()[o])}return null},this.renderEmbeddedDesktopAd=e=>c.a.createElement("div",{className:"SetPageEmbeddedAd-wrapper"},c.a.createElement(p,{id:e,termSort:this.props.termSort})),this.renderMobileWebEmbeddedAd=e=>c.a.createElement("div",{className:"SetPageEmbeddedAd-wrapper"},c.a.createElement(h,{id:e,termSort:this.props.termSort}))}render(){return this.props.shouldRenderEmbeddedAdsAsMobile?this.renderMwebAdIfPossible():this.renderDesktopAdIfPossible()}}m.defaultProps={placementVariant:null}},PyIS:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=null;function n(){if(null===a){var e=document.createElement("div");e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",document.body&&document.body.appendChild(e),a=e.offsetWidth-e.clientWidth,document.body&&document.body.removeChild(e)}return Number.isNaN(a)?0:a}},T1Oo:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("ToJy");function a(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},Y9jf:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return z}));r("4Brf"),r("yXV3"),r("+2oP"),r("ToJy"),r("zKZe"),r("5s+n"),r("JfAA"),r("FZtP");var a=r("8OQS"),n=r.n(a),s=r("08um"),i=r("TSYQ"),o=r.n(i),u=r("wLt/"),l=r("M0cf"),d=r("KYVs"),c=r("h08k"),p=r("t1Ez"),h=r("JxFz"),g=r("Pxp3"),m=r("bvRJ"),_=r("47yS"),f=r("0lcz"),S=r("og3H"),v=r("eLYi"),T=r("xisi"),b=r("p5lF"),y=r("TX86"),A=r.n(y),E=r("j2Rg"),w=r("w2yL"),k=r("sEfC"),x=r.n(k),I=r("X0lI"),P=r.n(I),C=r("q1tI"),M=r.n(C),L=r("H3z2"),O=r("jCse"),D=r("l6OD"),B=r("yckm"),R=r("8xMa"),N=r("C6mj"),U=r("T3U7"),F=r("gPdj"),j=r("Dgg+");function W(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var H="SetPage";function V(e){return Object.keys(e).filter((t=>e[t])).length>0}class z extends M.a.PureComponent{constructor(e){super(e),this.getToggledSelectState=e=>{var t=e.toString(),{termIdToIsSelectedMap:r}=this.state;return!r[t]},this.handlePressEscKey=()=>{this.stopAudio(),this.resetCurrentAudioState()},this.handleChangeSort=e=>{var t=e.target.value;this.props.actions.changeTermSort(t),this.setState({lastSelectedTermId:null})},this.handleClickAudioIcon=(e,t)=>{this.stopAudio(),e===this.state.currentAudioTermId?this.resetCurrentAudioState():(this.setCurrentAudioTermId(e),this.playAudio(e,u.b,t).then((()=>{clearTimeout(this.queuedAudio),this.queuedAudio=window.setTimeout((()=>Object(F.a)(this.playAudio(e,u.a,t),this.resetCurrentAudioTermId)),400)})).catch((()=>{this.resetCurrentAudioTermId()})))},this.handleSelectTerm=e=>{var t=this.getToggledSelectState(e);this.selectTermIds([e],t),this.setState({lastSelectedTermId:e})},this.handleSelectTermsInRange=(e,t)=>{var r=this.getToggledSelectState(e),{lastSelectedTermId:a}=this.state;if(a){var n=t?this.getChunkTermsArray(t):this.getCurrentTermsArray(),s=n.indexOf(a);if(s<0)this.selectTermIds([e],r);else{var i=n.indexOf(e),o=n.slice(Math.min(s,i),Math.max(s,i)+1);this.selectTermIds(o,r)}}else this.selectTermIds([e],r);this.setState({lastSelectedTermId:e})},this.handleClickTermText=e=>{var{termId:t,isSlow:r,side:a}=e;this.stopAudio(),t===this.state.currentAudioTermId&&this.state.currentAudioSide===a?this.resetCurrentAudioState():(this.setCurrentAudioTermId(t),Object(F.a)(this.playAudio(t,a,r,!1),this.resetCurrentAudioTermId)),Object(U.a)("set_page_term_clicked",{side:a})},this.handleEditTerm=(e,t,r,a,n)=>{Object(R.a)(e,{word:t,wordRichText:a,definition:r,definitionRichText:n},(t=>{if(!t.error&&t.responses&&t.responses[0].models){var r=t.responses[0].models.term[0];this.updateTermById(e,r)}}));var s=Object.assign({},this.state.termIdToIsLoadingMap,{[e.toString()]:!0});this.setState({termIdToIsLoadingMap:s})},this.handleClickSeeMore=()=>{Object(U.a)("set_page_see_more_clicked"),this.setState({isShowingAllTerms:!0})},this.handleSignupButtonInlineBanner=()=>{Object(U.a)("set_page_signup_wall_email_button_clicked"),this.props.actions.openSignupModal()},this.handleSocialSignupButton=e=>{Object(U.a)("set_page_signup_wall_social_signup_button_clicked",{socialNetworkName:e})},this.handleToggleFilter=e=>{this.props.actions.changeIsSelectedOnly(e===c.a.STARRED),this.props.actions.writePreference({studySelected:e===c.a.STARRED})},this.handleToggleSelectChunk=(e,t)=>{var r=this.getChunkTermsArray(e);this.selectTermIds(r,t)},this.areElementBoundariesVisible=e=>{if(!e)return!1;var t=e.getBoundingClientRect();return t.top+136<=window.innerHeight&&t.bottom>window.innerHeight},this.resetCurrentAudioTermId=()=>{this.setState({currentAudioTermId:null})},this.stopEventListeners=()=>{this.eventListeners.forEach((e=>e.remove()))},this.updateBreakpointChangeIfNeeded=()=>{var e=Object(D.e)();e!==this.state.shouldRenderEmbeddedAdsAsMobile&&this.setState({shouldRenderEmbeddedAdsAsMobile:e},(()=>{e?Object(U.a)("set_page_resize_rendering_mweb"):Object(U.a)("set_page_resize_rendering_desktop")}))},this.showStickyBannerOverTermsList=()=>{this.state.isStickyBannerClosed||this.setState({isShowingStickyBanner:this.areElementBoundariesVisible(this.termsRef.current)})},this.selectTermIds=(e,t)=>{var r={};e.forEach((e=>{r[e]=t}));var{termIdToIsSelectedMap:a}=this.state,n=Object.assign({},a,r);this.setState({termIdToIsSelectedMap:n}),t?this.setHasTermsSelected():this.resetTermFilterIfNoSelectedTerms(n),function(e,t,r){var a=t?"/selected-terms":"/selected-terms/delete",n=e.map((e=>parseInt(e,10))).join(",");T.a.post(a).send({setIds:r.set.id,termIds:n,source:S.ob.SETPAGE}).credentials().end((()=>{}))}(e,t,this.props)},this.shouldShowEmbeddedAd=e=>!(!this.shouldShowAds()||!e||this.state.shouldShowSignupWall),this.eventListeners=[],this.termsRef=M.a.createRef(),this.soundPlayer=new O.a,e.shouldShowSignupWall&&(this.visitorHelper=new j.a);var t=this.props.termIdToIsSelectedMap,r=V(t),a=this.props.termIdToTermsMap;this.state={alphabeticalOrder:e.alphabeticalOrder,currentAudioSide:null,currentAudioTermId:null,hasTermsSelected:r,isShowingAllTerms:!1,isShowingStickyBanner:!1,isStickyBannerClosed:!1,lastSelectedTermId:null,shouldRenderEmbeddedAdsAsMobile:Object(D.e)(),shouldShowSignupWall:this.hasVisitedEnoughToSeeSignupWall(),termIdToIsLoadingMap:{},termIdToIsSelectedMap:t,termIdToTermsMap:a}}componentDidMount(){this.bindKeys(),this.state.shouldShowSignupWall&&Object(U.a)("set_page_signup_wall_show"),this.registerListeners()}componentWillUnmount(){this.unbindKeys(),this.stopEventListeners()}getCurrentTermsArray(){return this.props.termSort===L.c.ALPHABETICAL?this.state.alphabeticalOrder:this.props.originalOrder}getChunkTermsArray(e){return this.props.termSort===L.c.YOUR_STATS&&this.props.yourStatsChunks[e]?this.props.yourStatsChunks[e].termIds:[]}renderTermsList(){var e=this.getCurrentTermsArray(),t=e.length;return this.shouldShowLimitedTerms()&&(t=150),this.state.shouldShowSignupWall&&(t=Math.min(10,t)),this.renderTermsFromIds(e,"",t)}renderLoadingIndicator(){return M.a.createElement(g.a,{className:"SetPageTerms-loadingContainer"},M.a.createElement("div",{className:"SetPageTerms-loadingIndicator"},M.a.createElement(_.a,{size:"large"})))}renderStatsChunks(e){var t=0,r=0;return Object.keys(e).map((a=>{var n=e[a],s=n.termIds.filter((e=>!0===this.state.termIdToIsSelectedMap[e.toString()]));return this.props.selectedOnly&&0===s.length||0===n.termIds.length?null:(t+=r,r=n.termIds.length,M.a.createElement("div",{className:"SetPageTerms-chunkWrapper",key:"chunk-"+a},M.a.createElement(d.a,{disableSelectedAllFilter:this.props.selectedOnly,hasAllSelected:s.length===n.termIds.length,hasSomeSelected:s.length>0,onSelectAll:this.handleToggleSelectChunk,shortName:n.shortName,subtitle:n.subtitle,termCount:n.termIds.length,title:n.title},this.renderTermsFromIds(n.termIds,a,1/0,t))))}))}renderYourStats(){return M.a.createElement("div",{className:"SetPageTerms-yourStats"},this.renderStatsChunks(this.props.yourStatsChunks))}renderTermsView(){switch(this.props.termSort){case L.c.YOUR_STATS:return this.renderYourStats();default:return this.renderTermsList()}}renderUnlockAllTerms(){return M.a.createElement("div",{className:"SetPageTerms-unlockTerms"},M.a.createElement(m.a,{className:"SetPageTerms-unlockTermsIcon",icon:"lock"}),M.a.createElement("div",{className:"SetPageTerms-unlockTermsMessage"},M.a.createElement(p.a,{id:"purchasable_content.unlock_all_terms",numTerms:this.props.set.numTerms})))}renderSignupWallInline(){return M.a.createElement(w.a,{onEmailSignupButtonClicked:this.handleSignupButtonInlineBanner,onFacebookSignupButtonClicked:this.handleSocialSignupButton.bind(this,"facebook"),onGoogleSignupButtonClicked:this.handleSocialSignupButton.bind(this,"google"),onLoginLinkClicked:this.props.actions.openSignupModalLogin})}renderEditButton(){return M.a.createElement("div",{className:"SetPageTerms-editButtonWrapper"},M.a.createElement(h.a,{"aria-label":e("set_page.edit_set_button"),hero:!0,linkTo:this.props.setPaths.editBottom},e("set_page.edit_set_button")))}renderSeeMoreButton(){return M.a.createElement("div",{className:"SetPageTerms-seeMore"},M.a.createElement(h.a,{"aria-label":e("set_page.terms.load_more"),onClick:this.handleClickSeeMore,width:"fill"},e("set_page.terms.load_more")))}renderEmbeddedAd(e,t,r,a){return M.a.createElement(l.a,{chunkSize:t.length,chunkTermIndex:r,setPageMultipleEmbeddedAdsDesktopMaxAds:this.props.setPageMultipleEmbeddedAdsDesktopMaxAds,setPageMultipleEmbeddedAdsDesktopMinTerms:this.props.setPageMultipleEmbeddedAdsDesktopMinTerms,setPageMultipleEmbeddedAdsDesktopSpacing:this.props.setPageMultipleEmbeddedAdsDesktopSpacing,setPageMultipleEmbeddedAdsDesktopStartPosition:this.props.setPageMultipleEmbeddedAdsDesktopStartPosition,setPageMultipleEmbeddedAdsMobileMaxAds:this.props.setPageMultipleEmbeddedAdsMobileMaxAds,setPageMultipleEmbeddedAdsMobileMinTerms:this.props.setPageMultipleEmbeddedAdsMobileMinTerms,setPageMultipleEmbeddedAdsMobileSpacing:this.props.setPageMultipleEmbeddedAdsMobileSpacing,setPageMultipleEmbeddedAdsMobileStartPosition:this.props.setPageMultipleEmbeddedAdsMobileStartPosition,setTermCount:this.getCurrentTermsArray().length,setTermIndex:a,shouldRenderEmbeddedAdsAsMobile:this.state.shouldRenderEmbeddedAdsAsMobile,termSort:this.props.termSort})}renderTermsFromIds(t,r,a,n){void 0===r&&(r=""),void 0===a&&(a=1/0),void 0===n&&(n=0);var s=n;return t.map(((n,i)=>{var o=n.toString(),u=this.state.termIdToTermsMap[o],l=this.props.customDistractorCountByTermId[n]||0,d=i<a&&(!this.props.selectedOnly||!0===this.state.termIdToIsSelectedMap[o]),c="term-"+r+"-"+n,p={canAccessStudyableFeatures:this.props.canAccessStudyableFeatures,canEditRichText:this.props.canEditRichText,chunkName:r,customDistractorCount:l,isLoadingUpdate:!!this.state.termIdToIsLoadingMap[o],isPlayingAudio:u.id===this.state.currentAudioTermId,isSelected:this.state.termIdToIsSelectedMap[o],isShowing:d,onClickAudioIcon:this.handleClickAudioIcon,onClickStar:this.handleSelectTerm,onClickStarWithRange:this.handleSelectTermsInRange,onClickTermText:this.handleClickTermText,onEdit:this.handleEditTerm,shouldShowRichText:this.props.shouldShowRichText,shouldRenderScore:!1,showVerifiedUI:this.props.showVerifiedUI,term:u,termId:o},h=this.shouldShowEmbeddedAd(d)?this.renderEmbeddedAd(r,t,i,s):null;return s++,M.a.createElement(M.a.Fragment,{key:c},M.a.createElement("div",{"aria-label":e("cards_label.term"),className:"SetPageTerms-term"},M.a.createElement(v.a,p)),h)}))}renderStickyBannerWithStudyButtons(){return M.a.createElement(E.a,{hasAdz:this.shouldShowAds(),set:this.props.set})}renderPurchasableTermsView(){var e=this.props.set.numTerms<=6?Math.max(1,this.props.set.numTerms-2):5,t=this.getCurrentTermsArray().slice(0,e);return this.renderTermsFromIds(t)}renderTerms(){return M.a.createElement("div",{className:"SetPage-terms",ref:this.termsRef},M.a.createElement(c.b,{alphabeticalIsDifferent:this.props.alphabeticalIsDifferent,canAccessStudyableFeatures:this.props.canAccessStudyableFeatures,handleChangeSort:this.handleChangeSort,handleToggleFilter:this.handleToggleFilter,hasAnyAnswers:this.props.hasAnyAnswers,hasTermsSelected:this.state.hasTermsSelected,originalOrder:this.props.originalOrder,selectedOnly:this.props.selectedOnly,setId:this.props.set.id,showVerifiedUI:this.props.showVerifiedUI,termIdToIsSelectedMap:this.state.termIdToIsSelectedMap,termSort:this.props.termSort,user:this.props.user}),M.a.createElement("section",{className:"SetPageTerms-termsList"},this.shouldShowRentalBanner()?this.renderPurchasableTermsView():this.renderTermsView(),!this.props.isShowingDelightedSurvey&&this.state.shouldShowSignupWall?this.renderSignupWallInline():null,this.shouldShowRentalBanner()?this.renderUnlockAllTerms():null),!this.props.isShowingDelightedSurvey&&this.state.isShowingStickyBanner&&this.shouldShowStickyBannerWithStudyButtons()?this.renderStickyBannerWithStudyButtons():null,this.shouldShowLimitedTerms()?this.renderSeeMoreButton():null,this.props.canEditSet?this.renderEditButton():null)}render(){var e=o()("SetPageTerms-termsWrapper SetPage-termsList",{"is-purchasable":this.shouldShowRentalBanner()});return M.a.createElement(f.a,{"aria-labelledby":"SetPageTermsHeader-termsListHeading-"+this.props.set.id,className:e},this.renderTerms())}hasVisitedEnoughToSeeSignupWall(){return this.props.shouldShowSignupWall&&!!this.visitorHelper&&this.visitorHelper.visitCount>1}bindKeys(){A.a.pushScope(H),A()("esc",H,this.handlePressEscKey)}unbindKeys(){A.a.popScope(H),A.a.unbind("esc",H)}playAudio(t,r,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!0),new Promise(((s,i)=>{var o=P()(this.state.termIdToTermsMap[t.toString()]),l=o._wordAudioUrl;l&&!o.wordCustomAudioId&&(a&&o._wordSlowTtsUrl&&(l=o._wordSlowTtsUrl),this.soundPlayer.preload(l));var d=o._definitionAudioUrl;d&&!o.definitionCustomAudioId&&(a&&o._definitionSlowTtsUrl&&(d=o._definitionSlowTtsUrl),this.soundPlayer.preload(d));var c=r===u.b?l:d;if(!c)return s(),void this.setState({currentAudioSide:null});var p=()=>{this.setState({currentAudioSide:null})};this.setState({currentAudioSide:r}),this.soundPlayer.play(c,{onStop:p,onFinish:()=>{p(),s()},onError:()=>{p(),n||alert(e("set_page.terms.term_play_audio_error")),i(new Error("Play error for "+c))}})}))}resetCurrentAudioState(){this.setState({currentAudioTermId:null,currentAudioSide:null})}setCurrentAudioTermId(e){this.setState({currentAudioTermId:e})}stopAudio(){this.soundPlayer.stopAll()}startEventListeners(e){var t=()=>{e.forEach((e=>e())),this.hasScheduledScrollRaf=!1};this.eventListeners.push(B.a.listen(window.document,"scroll",(()=>{this.hasScheduledScrollRaf||(this.hasScheduledScrollRaf=!0,window.requestAnimationFrame((()=>t())))}))),this.eventListeners.push(B.a.listen(window,"resize",x()((()=>t()),100))),t()}registerListeners(){var e=[];this.shouldShowStickyBannerWithStudyButtons()&&e.push(this.showStickyBannerOverTermsList),e.push(this.updateBreakpointChangeIfNeeded),this.startEventListeners(e)}updateTermById(e,t){var r=e.toString(),a=Object.assign({},this.state.termIdToTermsMap,{[r]:t}),s=Object.keys(a).sort(((e,t)=>Object(b.a)(a[e].word,a[t].word))).map((e=>parseInt(e,10))),i=this.state.termIdToIsLoadingMap,o=n()(i,[r].map(W));this.setState({alphabeticalOrder:s,termIdToIsLoadingMap:o,termIdToTermsMap:a})}resetTermFilterIfNoSelectedTerms(e){V(e)||(this.props.actions.changeIsSelectedOnly(!1),this.setState({hasTermsSelected:!1}))}setHasTermsSelected(){this.state.hasTermsSelected||this.setState({hasTermsSelected:!0})}shouldShowStickyBannerWithStudyButtons(){return!this.state.shouldShowSignupWall&&this.props.shouldShowStickyBannerWithStudyButtons&&!Object(s.m)()}shouldShowLimitedTerms(){return!this.state.shouldShowSignupWall&&!this.state.isShowingAllTerms&&!this.props.selectedOnly&&this.props.termSort!==L.c.YOUR_STATS&&this.getCurrentTermsArray().length>=150}shouldShowRentalBanner(){return!this.props.isShowingDelightedSurvey&&this.props.showVerifiedUI&&!this.props.canAccessStudyableFeatures}shouldShowAds(){return!Object(N.a)()&&this.props.shouldShowAd&&!this.props.showVerifiedUI}}z.defaultProps={canAccessStudyableFeatures:!1,isDiagramSet:!1,isDiagramSetLoadError:!1,selectedOnly:!1,showVerifiedUI:!1,yourStatsChunks:{}}}).call(this,r("nrsj").default)},eLYi:function(e,t,r){"use strict";var a=r("lTK7"),n=r("Ef4P"),s=r("VSSp"),i=r("Vg22"),o=r("peh1"),u=r("wRpB"),l=Object(o.createStructuredSelector)({canEditSet:u.i,defLang:u.t,diagramImage:u.u,diagramShape:(e,t)=>{var r=Object(u.v)(e);return r?r.find((e=>""+e.termId===t.termId)):null},editWithPasswordPath:u.y,hasAudio:(e,t)=>null!==t.term._wordAudioUrl||null!==t.term._definitionAudioUrl,hasTooltips:u.O,isEditable:u.cb,isEditableWithPassword:u.db,wordLang:u.Hd});t.a=Object(i.connect)(l,null,null,{context:n.a})(Object(s.a)()(a.a))},h08k:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return h}));var a,n=r("1Pxe"),s=r("Pxp3"),i=r("Ahwr"),o=r("8DN3"),u=r("FFEN"),l=r("DhtV"),d=r("q1tI"),c=r.n(d),p=r("H3z2");!function(e){e.ALL="all",e.STARRED="starred"}(a||(a={}));class h extends c.a.PureComponent{getNumStarred(){return e=this.props.termIdToIsSelectedMap,Object.keys(e).filter((t=>e[t])).length;var e}renderFilterToggle(){return c.a.createElement("div",{className:"SetPageTermsHeader-filterToggle",key:"filterToggle"},c.a.createElement(o.a,{inline:!0,key:"filter-control"},c.a.createElement(l.b,{onChange:this.props.handleToggleFilter,value:this.props.selectedOnly?a.STARRED:a.ALL},c.a.createElement(l.a,{value:a.ALL},e("set_page.filter_options.all")),c.a.createElement(l.a,{value:a.STARRED},e("set_page.filter_options.starred",{numStarred:this.getNumStarred()})))))}renderSortOptions(){return c.a.createElement("div",{className:"SetPageTermsHeader-sortDropdown",key:"filterToggle"},c.a.createElement(o.a,{inline:!0,key:"sort-control"},c.a.createElement(i.a,{onChange:this.props.handleChangeSort,value:this.props.termSort},c.a.createElement("option",{value:p.c.ORIGINAL},e("set_page.term_ordering.original")),this.props.alphabeticalIsDifferent?c.a.createElement("option",{value:p.c.ALPHABETICAL},e("set_page.term_ordering.alphabetical")):null,this.props.hasAnyAnswers?c.a.createElement("option",{value:p.c.YOUR_STATS},e("set_page.term_ordering.your_stats")):null)))}renderControls(){return c.a.createElement(c.a.Fragment,null,this.shouldShowSortOptions()?this.renderSortOptions():null,c.a.createElement(n.CSSTransitionGroup,{component:c.a.Fragment,transitionName:"SetPageTermsHeader-filterToggleTransition"},this.shouldShowFilterToggle()?this.renderFilterToggle():null))}render(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{className:"SetPageTermsHeader-termsListTitle"},this.shouldShowTermsCount()?c.a.createElement(u.a,{size:4},c.a.createElement("span",{id:"SetPageTermsHeader-termsListHeading-"+this.props.setId},e("set_page.terms.terms_title",{numTerms:this.props.originalOrder.length}))):null,c.a.createElement(n.CSSTransitionGroup,{className:"SetPageTermsHeader-controls SetPageTermsHeader-controls--main",component:"div",transitionName:"SetPageTermsHeader-filterToggleTransition"},this.shouldShowSortOptions()||this.shouldShowFilterToggle()?this.renderControls():null)))}shouldShowTermsCount(){return this.props.canAccessStudyableFeatures||!this.props.showVerifiedUI}shouldShowSortOptions(){return!!this.props.user&&(!(this.props.showVerifiedUI&&!this.props.canAccessStudyableFeatures)&&(this.props.alphabeticalIsDifferent||this.props.hasAnyAnswers))}shouldShowFilterToggle(){return!!this.props.user&&this.props.hasTermsSelected}}h.defaultProps={canAccessStudyableFeatures:!1,showVerifiedUI:!1}}).call(this,r("nrsj").default)},ifSZ:function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return i}));var a=r("9WHe");function n(e){e?a.a.warning("Unknown language code",{language:e}):a.a.error("Empty language param",{language:e})}function s(t){switch(t){case"??":return e("languages_uppercase.unknown");case"af":return e("languages_uppercase.af");case"ak":return e("languages_uppercase.ak");case"akk":return e("languages_uppercase.akk");case"am":return e("languages_uppercase.am");case"ang":return e("languages_uppercase.ang");case"ar":return e("languages_uppercase.ar");case"ase":return e("languages_uppercase.ase");case"az":return e("languages_uppercase.az");case"be":return e("languages_uppercase.be");case"bg":return e("languages_uppercase.bg");case"bh":return e("languages_uppercase.bh");case"bn":return e("languages_uppercase.bn");case"bo":return e("languages_uppercase.bo");case"br":return e("languages_uppercase.br");case"bs":return e("languages_uppercase.bs");case"ca":return e("languages_uppercase.ca");case"ceb":return e("languages_uppercase.ceb");case"ch":return e("languages_uppercase.ch");case"chem":return e("languages_uppercase.chem");case"cho":return e("languages_uppercase.cho");case"chr":return e("languages_uppercase.chr");case"co":return e("languages_uppercase.co");case"cop":return e("languages_uppercase.cop");case"cs":return e("languages_uppercase.cs");case"cy":return e("languages_uppercase.cy");case"da":return e("languages_uppercase.da");case"de":return e("languages_uppercase.de");case"den":return e("languages_uppercase.den");case"dv":return e("languages_uppercase.dv");case"dyo":return e("languages_uppercase.dyo");case"el":return e("languages_uppercase.el");case"en":return e("languages_uppercase.en");case"eo":return e("languages_uppercase.eo");case"es":return e("languages_uppercase.es");case"et":return e("languages_uppercase.et");case"eu":return e("languages_uppercase.eu");case"fa":return e("languages_uppercase.fa");case"ff":return e("languages_uppercase.ff");case"fi":return e("languages_uppercase.fi");case"fil":return e("languages_uppercase.fil");case"fo":return e("languages_uppercase.fo");case"fr":return e("languages_uppercase.fr");case"fy":return e("languages_uppercase.fy");case"ga":return e("languages_uppercase.ga");case"gd":return e("languages_uppercase.gd");case"gl":return e("languages_uppercase.gl");case"gn":return e("languages_uppercase.gn");case"got":return e("languages_uppercase.got");case"gu":return e("languages_uppercase.gu");case"ha":return e("languages_uppercase.ha");case"hai":return e("languages_uppercase.hai");case"haw":return e("languages_uppercase.haw");case"hi":return e("languages_uppercase.hi");case"hil":return e("languages_uppercase.hil");case"hmv":return e("languages_uppercase.hmv");case"hr":return e("languages_uppercase.hr");case"ht":return e("languages_uppercase.ht");case"hu":return e("languages_uppercase.hu");case"hy":return e("languages_uppercase.hy");case"id":return e("languages_uppercase.id");case"ig":return e("languages_uppercase.ig");case"ipa":return e("languages_uppercase.ipa");case"is":return e("languages_uppercase.is");case"it":return e("languages_uppercase.it");case"iu":return e("languages_uppercase.iu");case"iw":return e("languages_uppercase.iw");case"ja":return e("languages_uppercase.ja");case"ja-ka":return e("languages_uppercase.ja_ka");case"ja-ro":return e("languages_uppercase.ja_ro");case"jv":return e("languages_uppercase.jv");case"ka":return e("languages_uppercase.ka");case"kg":return e("languages_uppercase.kg");case"kin":return e("languages_uppercase.kin");case"kio":return e("languages_uppercase.kio");case"kk":return e("languages_uppercase.kk");case"km":return e("languages_uppercase.km");case"kn":return e("languages_uppercase.kn");case"ko":return e("languages_uppercase.ko");case"ksw":return e("languages_uppercase.ksw");case"ku":return e("languages_uppercase.ku");case"ky":return e("languages_uppercase.ky");case"la":return e("languages_uppercase.la");case"lb":return e("languages_uppercase.lb");case"lkt":return e("languages_uppercase.lkt");case"ln":return e("languages_uppercase.ln");case"lo":return e("languages_uppercase.lo");case"lt":return e("languages_uppercase.lt");case"lua":return e("languages_uppercase.lua");case"luo":return e("languages_uppercase.luo");case"lv":return e("languages_uppercase.lv");case"math":return e("languages_uppercase.math");case"mg":return e("languages_uppercase.mg");case"mh":return e("languages_uppercase.mh");case"mi":return e("languages_uppercase.mi");case"mjd":return e("languages_uppercase.mjd");case"mk":return e("languages_uppercase.mk");case"ml":return e("languages_uppercase.ml");case"mn":return e("languages_uppercase.mn");case"mnk":return e("languages_uppercase.mnk");case"moh":return e("languages_uppercase.moh");case"mr":return e("languages_uppercase.mr");case"ms":return e("languages_uppercase.ms");case"mt":return e("languages_uppercase.mt");case"my":return e("languages_uppercase.my");case"nah":return e("languages_uppercase.nah");case"ne":return e("languages_uppercase.ne");case"nl":return e("languages_uppercase.nl");case"no":return e("languages_uppercase.no");case"nv":return e("languages_uppercase.nv");case"oc":return e("languages_uppercase.oc");case"oj":return e("languages_uppercase.oj");case"om":return e("languages_uppercase.om");case"ood":return e("languages_uppercase.ood");case"or":return e("languages_uppercase.or");case"pa":return e("languages_uppercase.pa");case"photo":return e("languages_uppercase.photo");case"pi":return e("languages_uppercase.pi");case"pl":return e("languages_uppercase.pl");case"ps":return e("languages_uppercase.ps");case"pt":return e("languages_uppercase.pt");case"qu":return e("languages_uppercase.qu");case"rar":return e("languages_uppercase.rar");case"rm":return e("languages_uppercase.rm");case"ro":return e("languages_uppercase.ro");case"ru":return e("languages_uppercase.ru");case"sa":return e("languages_uppercase.sa");case"sd":return e("languages_uppercase.sd");case"see":return e("languages_uppercase.see");case"shn":return e("languages_uppercase.shn");case"si":return e("languages_uppercase.si");case"sk":return e("languages_uppercase.sk");case"sl":return e("languages_uppercase.sl");case"sm":return e("languages_uppercase.sm");case"so":return e("languages_uppercase.so");case"sq":return e("languages_uppercase.sq");case"sr":return e("languages_uppercase.sr");case"su":return e("languages_uppercase.su");case"sv":return e("languages_uppercase.sv");case"sw":return e("languages_uppercase.sw");case"syc":return e("languages_uppercase.syc");case"ta":return e("languages_uppercase.ta");case"te":return e("languages_uppercase.te");case"tet":return e("languages_uppercase.tet");case"tg":return e("languages_uppercase.tg");case"th":return e("languages_uppercase.th");case"ti":return e("languages_uppercase.ti");case"tl":return e("languages_uppercase.tl");case"to":return e("languages_uppercase.to");case"tr":return e("languages_uppercase.tr");case"trc":return e("languages_uppercase.trc");case"tt":return e("languages_uppercase.tt");case"tyv":return e("languages_uppercase.tyv");case"ug":return e("languages_uppercase.ug");case"uk":return e("languages_uppercase.uk");case"unm":return e("languages_uppercase.unm");case"ur":return e("languages_uppercase.ur");case"uz":return e("languages_uppercase.uz");case"vi":return e("languages_uppercase.vi");case"win":return e("languages_uppercase.win");case"wo":return e("languages_uppercase.wo");case"xh":return e("languages_uppercase.xh");case"yi":return e("languages_uppercase.yi");case"yo":return e("languages_uppercase.yo");case"zh-CN":return e("languages_uppercase.zh_cn");case"zh-pi":return e("languages_uppercase.zh_pi");case"zh-TW":return e("languages_uppercase.zh_tw");case"zu":return e("languages_uppercase.zu");default:return n(t),t}}function i(t){switch(t){case"??":return e("languages.unknown");case"af":return e("languages.af");case"ak":return e("languages.ak");case"akk":return e("languages.akk");case"am":return e("languages.am");case"ang":return e("languages.ang");case"ar":return e("languages.ar");case"ase":return e("languages.ase");case"az":return e("languages.az");case"be":return e("languages.be");case"bg":return e("languages.bg");case"bh":return e("languages.bh");case"bn":return e("languages.bn");case"bo":return e("languages.bo");case"br":return e("languages.br");case"bs":return e("languages.bs");case"ca":return e("languages.ca");case"ceb":return e("languages.ceb");case"ch":return e("languages.ch");case"chem":return e("languages.chem");case"cho":return e("languages.cho");case"chr":return e("languages.chr");case"co":return e("languages.co");case"cop":return e("languages.cop");case"cs":return e("languages.cs");case"cy":return e("languages.cy");case"da":return e("languages.da");case"de":return e("languages.de");case"den":return e("languages.den");case"dv":return e("languages.dv");case"dyo":return e("languages.dyo");case"el":return e("languages.el");case"en":return e("languages.en");case"eo":return e("languages.eo");case"es":return e("languages.es");case"et":return e("languages.et");case"eu":return e("languages.eu");case"fa":return e("languages.fa");case"ff":return e("languages.ff");case"fi":return e("languages.fi");case"fil":return e("languages.fil");case"fo":return e("languages.fo");case"fr":return e("languages.fr");case"fy":return e("languages.fy");case"ga":return e("languages.ga");case"gd":return e("languages.gd");case"gl":return e("languages.gl");case"gn":return e("languages.gn");case"got":return e("languages.got");case"gu":return e("languages.gu");case"ha":return e("languages.ha");case"hai":return e("languages.hai");case"haw":return e("languages.haw");case"hi":return e("languages.hi");case"hil":return e("languages.hil");case"hmv":return e("languages.hmv");case"hr":return e("languages.hr");case"ht":return e("languages.ht");case"hu":return e("languages.hu");case"hy":return e("languages.hy");case"id":return e("languages.id");case"ig":return e("languages.ig");case"ipa":return e("languages.ipa");case"is":return e("languages.is");case"it":return e("languages.it");case"iu":return e("languages.iu");case"iw":return e("languages.iw");case"ja":return e("languages.ja");case"ja-ka":return e("languages.ja_ka");case"ja-ro":return e("languages.ja_ro");case"jv":return e("languages.jv");case"ka":return e("languages.ka");case"kg":return e("languages.kg");case"kin":return e("languages.kin");case"kio":return e("languages.kio");case"kk":return e("languages.kk");case"km":return e("languages.km");case"kn":return e("languages.kn");case"ko":return e("languages.ko");case"ksw":return e("languages.ksw");case"ku":return e("languages.ku");case"ky":return e("languages.ky");case"la":return e("languages.la");case"lb":return e("languages.lb");case"lkt":return e("languages.lkt");case"ln":return e("languages.ln");case"lo":return e("languages.lo");case"lt":return e("languages.lt");case"lua":return e("languages.lua");case"luo":return e("languages.luo");case"lv":return e("languages.lv");case"math":return e("languages.math");case"mg":return e("languages.mg");case"mh":return e("languages.mh");case"mi":return e("languages.mi");case"mjd":return e("languages.mjd");case"mk":return e("languages.mk");case"ml":return e("languages.ml");case"mn":return e("languages.mn");case"mnk":return e("languages.mnk");case"moh":return e("languages.moh");case"mr":return e("languages.mr");case"ms":return e("languages.ms");case"mt":return e("languages.mt");case"my":return e("languages.my");case"nah":return e("languages.nah");case"ne":return e("languages.ne");case"nl":return e("languages.nl");case"no":return e("languages.no");case"nv":return e("languages.nv");case"oc":return e("languages.oc");case"oj":return e("languages.oj");case"om":return e("languages.om");case"ood":return e("languages.ood");case"or":return e("languages.or");case"pa":return e("languages.pa");case"photo":return e("languages.photo");case"pi":return e("languages.pi");case"pl":return e("languages.pl");case"ps":return e("languages.ps");case"pt":return e("languages.pt");case"qu":return e("languages.qu");case"rar":return e("languages.rar");case"rm":return e("languages.rm");case"ro":return e("languages.ro");case"ru":return e("languages.ru");case"sa":return e("languages.sa");case"sd":return e("languages.sd");case"see":return e("languages.see");case"shn":return e("languages.shn");case"si":return e("languages.si");case"sk":return e("languages.sk");case"sl":return e("languages.sl");case"sm":return e("languages.sm");case"so":return e("languages.so");case"sq":return e("languages.sq");case"sr":return e("languages.sr");case"su":return e("languages.su");case"sv":return e("languages.sv");case"sw":return e("languages.sw");case"syc":return e("languages.syc");case"ta":return e("languages.ta");case"te":return e("languages.te");case"tet":return e("languages.tet");case"tg":return e("languages.tg");case"th":return e("languages.th");case"ti":return e("languages.ti");case"tl":return e("languages.tl");case"to":return e("languages.to");case"tr":return e("languages.tr");case"trc":return e("languages.trc");case"tt":return e("languages.tt");case"tyv":return e("languages.tyv");case"ug":return e("languages.ug");case"uk":return e("languages.uk");case"unm":return e("languages.unm");case"ur":return e("languages.ur");case"uz":return e("languages.uz");case"vi":return e("languages.vi");case"win":return e("languages.win");case"wo":return e("languages.wo");case"xh":return e("languages.xh");case"yi":return e("languages.yi");case"yo":return e("languages.yo");case"zh-CN":return e("languages.zh_cn");case"zh-pi":return e("languages.zh_pi");case"zh-TW":return e("languages.zh_tw");case"zu":return e("languages.zu");default:return n(t),t}}}).call(this,r("nrsj").default)},j2Rg:function(e,t,r){"use strict";r("5s+n");var a=r("mr8R");t.a=Object(a.a)((()=>Promise.all([r.e("common"),r.e("set_term_lazy")]).then(r.bind(null,"LGqQ"))),{withSpinner:!0})},jCse:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r("5s+n"),r("FZtP");var a=r("9WHe"),n=r("HlzF"),s=r("n29V"),i=!1,o=new s.a;function u(e,t,r){var a=new n.Howl({src:[e]});return a.once("load",(()=>{t&&t(a.duration())})),a.once("loaderror",(()=>{r&&r(e)})),a}function l(e,t){var{onLoad:r,onError:a,onEnd:n,onStop:s}=t,i=o.memoize(e,(()=>u(e,r,a)));return i.once("playerror",(()=>{a&&a(e)})),i.once("end",(()=>{n&&n(e)})),i.once("stop",(()=>{s&&s(e)})),i}class d{constructor(){n.Howler.autoSuspend=!1,n.Howler.autoUnlock=!1}borrowWebAudioContext(){n.Howler.volume(1);var e=n.Howler.usingWebAudio?n.Howler.ctx:null;if(!e)return Promise.reject();switch(e.state){case"suspended":return e.resume().then((()=>e));case"running":return Promise.resolve(e);default:return Promise.reject()}}clearAllFinishListeners(){o.cache.forEach((e=>{e.off("end")}))}preload(e,t){var{onError:r,onLoad:n}=void 0===t?{}:t,s=o.get(e);if(n&&s&&"loaded"===s.state())n(s.duration());else try{o.memoize(e,(()=>u(e,n,r)))}catch(l){if(i)return;a.a.warning("AudioPlayer instance failed to loadClip in preload",l,{url:e}),i=!0}}play(e,t){var{onError:r,onFinish:n,onStop:s}=void 0===t?{}:t;try{l(e,{onError:r,onEnd:n,onStop:s}).play()}catch(i){a.a.error("AudioPlayer prepareClipToPlay failed in play()",i)}}loop(e,t){var{onError:r,onLoop:n,onStop:s}=void 0===t?{}:t;try{var i=l(e,{onError:r,onEnd:n,onStop:s}),o=i.play();i.loop(!0,o)}catch(u){a.a.error("AudioPlayer prepareClipToPlay failed in loop()",u)}}isPlaying(e){var t=o.get(e);return!!t&&t.playing()}destruct(e){var t=o.get(e);t&&(t.unload(),o.delete(e))}stop(e){var t=o.get(e);t&&(t.once("fade",(()=>{t.stop(),t.volume(1)})),t.fade(1,0,300))}stopAll(){o.cache.forEach((e=>e.stop()))}}},jiwd:function(e,t,r){"use strict";var a;r.d(t,"a",(function(){return a})),function(e){e.WORD_SIDE="word",e.DEFINITION_SIDE="definition"}(a||(a={}))},kf70:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=(e,t)=>e&&t?JSON.stringify(e)===JSON.stringify(t):e===t},"lCv/":function(e){e.exports=JSON.parse('{"af":["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],"akk":["ā","â","ē","ê","ī","î","ō","ô","ū","û","ḫ","ṣ","š","ṭ","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉"],"ang":["æ","ð","þ"],"ar":["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","ء","ة","ى"],"bg":["а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ь","ю","я"],"bs":["ć","đ","č","š","ž"],"chem":["←","↑","→","↓","↔","∙","°","⁻","⁺","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","₋","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","⇌","ε","∆","₊","ₙ"],"cs":["á","č","ď","é","ě","í","ň","ó","p","ř","š","ť","ú","ů","ý","ž"],"cy":["â","ä","á","à","ê","ë","é","è","î","ï","í","ì","ô","ö","ó","ò","û","ü","ú","ù","ŵ","ẅ","ẃ","ẁ","ŷ","ÿ","ý","ỳ"],"da":["å","æ","ø"],"de":["ä","ö","ü","ß","⸚"],"dyo":["á","é","í","ó","ñ","ú","Ŋ"],"el":["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","ς","τ","υ","φ","χ","ψ","ω"],"es":["á","é","í","ó","ú","ü","ñ","¿","¡","°"],"fi":["å","ä","ö"],"fr":["à","â","ç","è","é","ê","ë","î","ï","ô","œ","ù","û","ü"],"gd":["à","á","è","é","ì","í","ò","ó","ù","ú"],"ga":["à","á","è","é","ì","í","ò","ó","ù","ú"],"hai":["g̱","ḵ","x̱"],"haw":["ā","ē","ī","ō","ū"],"hr":["ć","đ","č","š","ž"],"hu":["á","é","í","ó","ö","ő","ú","ü","ű"],"is":["á","æ","ð","é","í","ó","ö","ø","þ","ú","ý"],"it":["à","è","é","ì","ò","ó","ù"],"iw":["א","בּ","ב","ג","ד","ה","ו","ז","ח","ט","י","כּ","כ","ך","ל","מ","ם","נ","ן","ס","ע","פּ","פ","ף","צ","ץ","ק","ר","שׁ","שׂ","ש","תּ","ת"],"ku":["ç","é","ê","í","î","ş","ú","û"],"la":["ā","æ","ē","ī","ō","œ","ū","ȳ"],"lkt":["á","ą","ą́","č","é","ǧ","ȟ","í","į","ó","š","ú","ų","ž","ŋ","ʼ"],"math":["+","−","±","×","÷","%","=","≠","≈","≡","<",">","≤","≥","≅","∼","½","¼","¾","√","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","⁺","⁻","∧","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","π","∞","∆","∑","ƒ","∫","‖","|","⊥","∠","∩","∪","∈","∋","∃","⊂","⊃","⊆","⊇","∉","⊄","°","α","β","γ","δ","ε","η","θ","ι","κ","λ","µ","∨","Ω","ω","ℵ","∅","∀","⊕","⊗","←","↑","→","↓","↔","∴","∵","σ","⌒","₊","ₙ"],"mi":["ā","ē","ī","ō","ū"],"nl":["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],"no":["å","æ","ø"],"ood":["ă","ḍ","ĕ","ĭ","ñ","ŋ","ŏ","ṣ","ŭ"],"pl":["ą","ć","ę","ń","ł","ó","ś","ź","ż"],"pt":["à","á","â","ã","ç","é","ê","í","ó","ô","õ","ú","ü"],"rar":["ā","ē","ī","ō","ū","ʻ","ꞌ"],"ro":["ă","â","î","ș","ş","ț","ţ"],"ru":["а","á","б","в","г","д","е","é","ё","ж","з","и","и́","й","к","л","м","н","о","ó","п","р","с","т","у","у́","ф","х","ц","ч","ш","щ","ъ","ы","ы́","ь","э","ю","ю́","я","я́"],"sk":["á","ä","č","é","ě","í","ĺ","ľ","ň","ó","ô","ŕ","š","ť","ú","ý","ž"],"sr":["ć","đ","č","š","ž"],"sv":["å","ä","ö"],"tet":["ñ","á","é","í","ó","ú"],"tr":["ı","ö","ü","ç","ğ","ş"],"tyv":["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","ң","о","ө","п","р","с","т","у","ү","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],"vi":["á","ǎ","â","đ","ê","ô","ơ","ư"],"wo":["à","é","ë","ó","ñ","Ŋ"],"zh-pi":["ā","á","ǎ","à","ē","é","ě","è","ī","í","ǐ","ì","ō","ó","ǒ","ò","ū","ú","ǔ","ù","ǖ","ǘ","ǚ","ǜ","ü"]}')},"lG1/":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));r("4mDm"),r("+2oP"),r("zKZe"),r("3bBZ");var a=r("pVnL"),n=r.n(a),s=r("8OQS"),i=r.n(s),o=r("1Pxe"),u=r("TSYQ"),l=r.n(u),d=r("nXOR"),c=r("qn7O"),p=r("V0yB"),h=r("X0lI"),g=r.n(h),m=r("q1tI"),_=r.n(m),f=r("qxWM"),S=r("T1Oo"),v=r("yckm"),T=r("PyIS"),b=r("W6SY");class y extends _.a.Component{constructor(){super(...arguments),this.state={isClicking:!1,isComponentFocused:!1},this.handleBlur=e=>{this.state.isClicking||this.setState({isComponentFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.handleComponentFocus=e=>{this.setState({isComponentFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleMouseUp=e=>{this.setState({isClicking:!1}),this.props.onMouseUp&&this.props.onMouseUp(e)},this.handleMouseDown=e=>{this.setState({isClicking:!0}),this.props.onNativeMouseDown&&this.props.onNativeMouseDown(e)},this.handleAccent=e=>{var t=g()(this.textareaRef.current,"Could not find text area component"),r=this.getSelectionStart(),a=this.getSelectionEnd();if(-1!==a){var n=this.getTextarea();if(n){var s=n.value||"",i=s.slice(0,r)+e+s.slice(a),o=window.document.createEvent("Event");o.initEvent("input",!0,!0);var u=n,l=Object.getOwnPropertyDescriptor(u.constructor.prototype,"value");null!=l&&l.set?l.set.call(u,i):u.value=i,u.dispatchEvent(o),this.setState({},(()=>t.setCaretPosition(r+e.length)))}}},this.wrapperRef=_.a.createRef(),this.textareaRef=_.a.createRef()}componentDidMount(){this.wrapperRef.current&&(this.wrapperMouseDownListener=v.a.listen(this.wrapperRef.current,"mousedown",this.handleMouseDown))}shouldComponentUpdate(e,t){return!Object(b.a)(this.props,e,["languageCodes"])||(!Object(b.a)(this.state,t)||!Object(S.a)(this.props.languageCodes,e.languageCodes))}componentWillUnmount(){this.wrapperMouseDownListener&&(this.wrapperMouseDownListener.remove(),this.wrapperMouseDownListener=null)}getCharactersByLang(){var e=f.a.getCharactersByLangForLangs(this.props.languageCodes);this.props.specificAccents.length>0&&this.props.languageCodes.length>0&&(e[this.props.languageCodes[0]]=this.props.specificAccents);return e}getSelectionStart(){return this.textareaRef.current?this.textareaRef.current.getSelectionStart():-1}getSelectionEnd(){return this.textareaRef.current?this.textareaRef.current.getSelectionEnd():-1}getTextarea(){return this.textareaRef.current?this.textareaRef.current.getTextarea():null}renderAccentsBar(){var e=l()("SpecialCharacterTextarea-accentsBar",{["SpecialCharacterTextarea-accentsBar--"+this.props.textAreaVariant]:this.props.textAreaVariant&&"default"!==this.props.textAreaVariant});return _.a.createElement("div",{className:e},_.a.createElement("div",{className:"SpecialCharacterTextarea-accentsBarInner"},_.a.createElement("div",{className:"SpecialCharacterTextarea-accentBarWrap",style:{marginRight:Object(T.a)()}},_.a.createElement(c.a,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,variant:"small"}))))}renderAccentButtonsInline(){return _.a.createElement(c.a,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,showUppercaseButtonInline:!0,variant:"small"})}renderAccentsDropdown(){return _.a.createElement(o.CSSTransitionGroup,{transitionEnterTimeout:120,transitionLeaveTimeout:120,transitionName:"SpecialCharacterTextarea-animateAccentsBar"},this.state.isComponentFocused&&this.containsAccentLanguage()?this.renderAccentsBar():null)}render(){var e=this.props,{textAreaVariant:t}=e,r=i()(e,["languageCodes","onFocus","specificAccents","variant","textAreaVariant"]),a=l()("SpecialCharacterTextarea",{"is-focused":this.state.isComponentFocused});return _.a.createElement("div",{className:a,onMouseUp:this.handleMouseUp,ref:this.wrapperRef},_.a.createElement(p.a,n()({},r,{onBlur:this.handleBlur,onFocus:this.handleComponentFocus,ref:this.textareaRef,variant:t})),_.a.createElement(d.a,{above:"s"},"inline"===this.props.variant?this.renderAccentButtonsInline():this.renderAccentsDropdown()))}focus(e){var t=g()(this.textareaRef.current,"Missing textareaRef in focus(number)");this.setState({isComponentFocused:!0}),t.focus(e)}blur(){var e=g()(this.textareaRef.current,"Missing textareaRef in blur()");this.setState({isComponentFocused:!1}),e.blur()}select(){g()(this.textareaRef.current,"Missing textareaRef in select()").select()}setCaretPosition(e){g()(this.textareaRef.current,"Missing textareaRef in setCaretPosition(number)").setCaretPosition(e)}setSelectionRange(e,t){g()(this.textareaRef.current,"Missing textarea in setSelectionRange(start, end)").setSelectionRange(e,t)}containsAccentLanguage(){return f.a.containsAccentLanguage(this.props.languageCodes)}}y.defaultProps=Object.assign({},p.a.defaultProps,{languageCodes:[],specificAccents:[],type:"autoExpand",variant:"dropdown"})},lTK7:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return C}));r("+2oP"),r("SYor");var a=r("TSYQ"),n=r.n(a),s=r("7zzx"),i=r("wLt/"),o=r("HPId"),u=r("t1Ez"),l=r("nXOR"),d=r("xqF0"),c=r("a08m"),p=r("jvKz"),h=r("FJLI"),g=r("vzun"),m=r("f4H6"),_=r("og3H"),f=r("JPcv"),S=r("NSD7"),v=r("q1tI"),T=r.n(v),b=r("i8i4"),y=r("RvVp"),A=r("xUBj"),E=r("/En6"),w=r("1Cun"),k=r("T3U7"),x=r("kf70"),I=r("EFuM"),P=e=>!!e.shiftKey;class C extends T.a.PureComponent{constructor(e){super(e),this.getThumbnailUrl=e=>{var t=e=>Object(I.g)()?2*e:e;return new A.a(e).withFit("cover").withWidth(t(120)).withHeight(t(100)).getFullUrl()},this.handleClickWord=e=>{this.props.onClickTermText({termId:this.props.term.id,isSlow:P(e),side:i.b}),this.props.hasAudio&&Object(w.a)({termId:this.props.term.id,language:this.props.wordLang,playbackAction:_.h.WORD,termSide:_.Qb.WORD},{custom_audio_id:this.props.term.wordCustomAudioId})},this.handleClickDefinition=e=>{this.props.onClickTermText({termId:this.props.term.id,isSlow:P(e),side:i.a}),this.props.hasAudio&&Object(w.a)({termId:this.props.term.id,language:this.props.defLang,playbackAction:_.h.DEFINITION,termSide:_.Qb.DEFINITION},{custom_audio_id:this.props.term.definitionCustomAudioId})},this.handleClickAudioIcon=e=>{this.props.onClickAudioIcon(this.props.term.id,P(e)),Object(k.a)("set_page_audio_clicked");var t=JSON.stringify({wordLang:this.props.wordLang,defLang:this.props.defLang});Object(w.a)({termId:this.props.term.id,language:t,playbackAction:_.h.AUDIO_BUTTON,termSide:_.Qb.UNKNOWN})},this.handleClickStar=e=>{var t=this.props.term.id;e.shiftKey?this.props.onClickStarWithRange(t,this.props.chunkName):this.props.onClickStar(t),Object(k.a)("set_page_star_clicked")},this.handleClickDocument=e=>{if(this.state.isEditing){var t=Object(b.findDOMNode)(this.wordText),r=Object(b.findDOMNode)(this.definitionText),a=Object(b.findDOMNode)(this.editButton);e.target===t||null!=t&&t.contains(e.target)||e.target===r||null!=r&&r.contains(e.target)||e.target===a||null!=a&&a.contains(e.target)||this.finishEditing(!0)}},this.handleClickToZoom=e=>{e.preventDefault(),e.stopPropagation(),this.zoomableImage&&this.zoomableImage.show()},this.handleEditorKeyDown=e=>{switch(e.keyCode){case 27:e.preventDefault(),this.finishEditing(!1);break;case 13:if(e.shiftKey)break;e.preventDefault(),this.finishEditing(!0)}},this.handlePlainTextEditorKeyDown=e=>{this.handleEditorKeyDown(e.nativeEvent)},this.handleRichTextEditorKeyDown=e=>(this.handleEditorKeyDown(e),27===e.keyCode||13===e.keyCode&&!e.shiftKey),this.handleWordChange=e=>{this.setState({editedWord:e.plain,editedWordRichText:e.rich})},this.handleDefinitionChange=e=>{this.setState({editedDefinition:e.plain,editedDefinitionRichText:e.rich})},this.handleClickEditIcon=()=>{Object(k.a)("set_page_inline_edit_clicked"),this.state.isEditing?this.finishEditing(!0):this.props.canEditSet?this.startEditing():window.location.href=this.props.editWithPasswordPath},this.handleExpandSides=()=>{this.setState({isExpanded:!0})},this.state={isEditing:!1,isExpanded:!1,editedWord:null,editedWordRichText:null,editedDefinition:null,editedDefinitionRichText:null,updatedTerm:{word:this.props.term.word,wordRichText:null,definition:this.props.term.definition,definitionRichText:null}}}componentDidMount(){window.document.addEventListener("click",this.handleClickDocument)}componentWillUnmount(){window.document.removeEventListener("click",this.handleClickDocument)}getDefinitionSideSize(){return Object(f.List)([this.props.term.definition,this.props.term._imageUrl]).filter((e=>e)).count()}getNumberOfSides(){return Object(f.List)([this.props.term.word,this.props.diagramShape]).filter((e=>e)).count()+this.getDefinitionSideSize()}getNumberOfRows(){return(this.props.term.word?1:0)+(this.getDefinitionSideSize()>0?1:0)+(this.shouldShowDiagramShape()?1:0)+(this.shouldShowCategoryLabel()?1:0)}renderImage(t){var r=Object(E.b)(t),a=".gif"===r.slice(-4),s=a?r:this.getThumbnailUrl(r),i=n()("SetPageTerm-image",{"is-animatedGif":a}),o=e("set_page.terms.image_alt")+": "+this.props.term.word;return T.a.createElement("div",{className:"SetPageTerm-imageWrap"},T.a.createElement(m.a,{alt:o,className:i,height:100,onClick:this.handleClickToZoom,ref:e=>{this.zoomableImage=e},src:s,width:120,zoomUrl:r}))}renderStarIcon(){var t=T.a.createElement(d.a,{alt:e("modes.cards.card_controls.star"),icon:"star",onClick:this.handleClickStar,variant:"borderless"});return!this.props.hasTooltips||Object(I.f)()||Object(I.j)()?t:T.a.createElement(p.a,{overlay:T.a.createElement(g.a,null,T.a.createElement(u.a,{id:"set_page.term_detail_tooltips.star_title"})),position:"top",triggerAction:"hover"},t)}renderAudioIcon(){var t=this.props.hasAudio?this.handleClickAudioIcon:void 0,r=T.a.createElement(d.a,{alt:e("modes.cards.card_controls.audio"),disabled:!this.props.hasAudio,icon:"audio",onClick:t,variant:"borderless"});if(this.props.hasAudio&&!this.props.hasTooltips||Object(I.f)()&&Object(I.j)())return r;var a=this.props.hasAudio?T.a.createElement(g.a,null,T.a.createElement(u.a,{id:"set_page.terms.term_audio_tooltip"})):T.a.createElement(g.a,null,T.a.createElement(u.a,{id:"set_page.terms.term_audio_unavailable_tooltip"}));return T.a.createElement(p.a,{overlay:a,position:"top right",triggerAction:"hover"},r)}renderActions(){return this.props.showVerifiedUI&&!this.props.canAccessStudyableFeatures?null:T.a.createElement("div",{className:"SetPageTerm-actions"},this.props.shouldShowStarIcon?T.a.createElement("span",{className:"SetPageTerm-star"},this.renderStarIcon()):null,this.props.shouldShowAudioIcon?T.a.createElement("span",{className:"SetPageTerm-audio"},this.renderAudioIcon()):null,this.props.isEditable?T.a.createElement("span",{className:"SetPageTerm-edit"},T.a.createElement(d.a,{alt:e("modes.cards.card_controls.edit"),icon:"edit",onClick:this.handleClickEditIcon,ref:e=>{this.editButton=e},variant:"borderless"})):null)}renderWordText(){return T.a.createElement(s.a,{autoFocus:!0,canEditRichText:this.props.canEditRichText,isEditing:this.state.isEditing,lang:this.props.wordLang,onChange:this.handleWordChange,onKeyDown:this.handlePlainTextEditorKeyDown,onRichTextKeyDown:this.props.shouldShowRichText?this.handleRichTextEditorKeyDown:null,ref:e=>{this.wordTermText=e},shouldShowRichText:this.props.shouldShowRichText,shouldUseLanguageLabel:this.shouldUseLanguageLabel(),side:i.b,term:this.props.isLoadingUpdate?this.state.updatedTerm:this.props.term})}renderDefinitionText(){return T.a.createElement(s.a,{canEditRichText:this.props.canEditRichText,isEditing:this.state.isEditing,lang:this.props.defLang,onChange:this.handleDefinitionChange,onKeyDown:this.handlePlainTextEditorKeyDown,onRichTextKeyDown:this.props.shouldShowRichText?this.handleRichTextEditorKeyDown:null,shouldShowRichText:this.props.shouldShowRichText,shouldUseLanguageLabel:this.shouldUseLanguageLabel(),side:i.a,term:this.props.isLoadingUpdate?this.state.updatedTerm:this.props.term})}renderWordSide(){var e=!this.state.isEditing&&this.props.shouldShowAudioIcon&&this.props.term._wordAudioUrl?T.a.createElement("a",{className:"SetPageTerm-wordText",onClick:this.handleClickWord},this.renderWordText()):T.a.createElement("span",{className:"SetPageTerm-wordText",ref:e=>{this.wordText=e}},this.renderWordText()),t=n()("SetPageTerm-side",{"SetPageTerm-smallSide":2===this.getNumberOfRows()});return T.a.createElement("div",{className:t},this.shouldShowSideLabels()&&T.a.createElement("div",{className:"SetPageTerm-sideLabel"},T.a.createElement(u.a,{id:"cards_label.term"})),T.a.createElement("div",{className:"SetPageTerm-sideContent"},e))}renderDefinition(){return!this.state.isEditing&&this.props.shouldShowAudioIcon&&this.props.term._definitionAudioUrl?T.a.createElement("a",{className:"SetPageTerm-definitionText",onClick:this.handleClickDefinition},this.renderDefinitionText()):T.a.createElement("span",{className:"SetPageTerm-definitionText",ref:e=>{this.definitionText=e}},this.renderDefinitionText())}renderDefinitionSide(){var e=n()("SetPageTerm-side",{"SetPageTerm-largeSide":2===this.getNumberOfRows()});return T.a.createElement("div",{className:e},this.shouldShowSideLabels()&&T.a.createElement("div",{className:"SetPageTerm-sideLabel"},T.a.createElement(u.a,{id:"cards_label.definition"})),T.a.createElement("div",{className:"SetPageTerm-sideContent"},this.props.term.definition||!this.props.term._imageUrl?this.renderDefinition():null,this.props.term._imageUrl?this.renderImage(this.props.term._imageUrl):null,this.props.customDistractorCount&&this.props.customDistractorCount>0?T.a.createElement(o.a,{distractorCount:this.props.customDistractorCount}):null))}renderCategorySide(){var e={backgroundColor:this.props.categoryColor},t=n()("SetPageTerm-side",{"SetPageTerm-largeSide":2===this.getNumberOfRows()});return T.a.createElement("div",{className:t},this.shouldShowSideLabels()&&T.a.createElement("div",{className:"SetPageTerm-sideLabel"},T.a.createElement(u.a,{id:"cards_label.category"})),T.a.createElement("div",{className:"SetPageTerm-sideContent"},T.a.createElement("div",{className:"SetPageTerm-category",style:e},this.props.categoryLabel)))}renderLocationSide(){var e=n()("SetPageTerm-side",{"SetPageTerm-largeSide":2===this.getNumberOfRows()});return T.a.createElement("div",{className:e},this.shouldShowSideLabels()&&T.a.createElement("div",{className:"SetPageTerm-sideLabel"},T.a.createElement(u.a,{id:"cards_label.location"})),T.a.createElement("div",{className:"SetPageTerm-sideContent"},T.a.createElement("div",{className:"SetPageTerm-diagram"},T.a.createElement(S.a,{diagramShape:Object(f.fromJS)(this.props.diagramShape),image:Object(f.fromJS)(this.props.diagramImage)}))))}renderScorePopover(){return T.a.createElement(h.a,{includeArrowInBounds:!0},T.a.createElement("div",{className:"SetPageTerm-scorePopover"},this.props.scorePopoverContent))}renderScore(){return T.a.createElement("div",{className:"SetPageTerm-score"},T.a.createElement(p.a,{className:"SetPageTerm-scoreOverlay",overlay:this.renderScorePopover(),position:"bottom left",triggerAction:"hover"},T.a.createElement("span",{className:"SetPageTerm-scoreText"},this.props.score)))}renderExpandLink(){return T.a.createElement("div",{className:"SetPageTerm-moreSide"},T.a.createElement(c.a,{onClick:this.handleExpandSides},T.a.createElement(u.a,{id:"set_page.terms.expand_sides_link",num:this.getNumberOfSides()-3})))}render(){var e=n()("SetPageTerm",{"has-image":!!this.props.term._imageUrl,"has-definitionText":!!this.props.term.definition,"has-score":this.props.shouldRenderScore,"has-threeActions":this.props.isEditable,"is-editing":this.state.isEditing,"is-loading":this.props.isLoadingUpdate,"is-playing":this.props.isPlayingAudio,"is-selected":this.props.isSelected,"is-showing":this.props.isShowing});return T.a.createElement("div",{className:e},T.a.createElement("div",{className:"SetPageTerm-inner"},T.a.createElement(l.a,{below:"s"},this.renderActions()),this.props.shouldRenderScore?this.renderScore():null,T.a.createElement("div",{className:"SetPageTerm-contentWrapper"},T.a.createElement("div",{className:"SetPageTerm-content"},this.renderWordSide(),this.shouldShowDefinitionSide()?this.renderDefinitionSide():null,this.shouldShowExpandLink()?this.renderExpandLink():null,this.shouldShowDiagramShape()?this.renderLocationSide():null,this.shouldShowCategoryLabel()?this.renderCategorySide():null)),T.a.createElement(l.a,{above:"s"},this.renderActions())))}hasEditChanges(){var{editedWord:e,editedDefinition:t,editedWordRichText:r,editedDefinitionRichText:a}=this.state,{term:n}=this.props,s=!!e&&e.trim().length>0,i=e!==n.word||!Object(x.a)(r,n.wordRichText),o=!!t&&t.trim().length>0,u=t!==n.definition||!Object(x.a)(a,n.definitionRichText);return s&&i||o&&u}shouldShowExpandLink(){return this.getNumberOfSides()>3&&!this.state.isExpanded}shouldShowDiagramShape(){return this.props.diagramShape&&this.props.isShowing&&((this.props.term.word?1:0)+this.getDefinitionSideSize()<3||this.state.isExpanded)}shouldShowCategoryLabel(){return!!this.props.categoryLabel&&(this.getNumberOfSides()<=3||this.state.isExpanded)}shouldShowDefinitionSide(){return this.getDefinitionSideSize()>0||!this.props.diagramShape}shouldUseLanguageLabel(){return this.props.wordLang!==this.props.defLang}shouldShowSideLabels(){return!(!this.props.diagramShape&&!this.props.categoryLabel)}startEditing(){this.setState({isEditing:!0})}finishEditing(e){var t=this.props.term.word,r=this.props.term.definition,a=this.props.term.wordRichText||Object(y.c)(this.props.term.word),n=this.props.term.definitionRichText||Object(y.c)(this.props.term.definition);e&&this.hasEditChanges()&&(this.state.editedWord&&(t=this.state.editedWord),this.state.editedDefinition&&(r=this.state.editedDefinition),this.state.editedWordRichText&&(a=this.state.editedWordRichText),this.state.editedDefinitionRichText&&(n=this.state.editedDefinitionRichText),this.props.onEdit(this.props.term.id,t,r,a,n)),this.setState({isEditing:!1,editedWord:null,editedDefinition:null,updatedTerm:{word:t,wordRichText:a,definition:r,definitionRichText:n}})}}C.defaultProps={canAccessStudyableFeatures:!1,showVerifiedUI:!1,shouldShowStarIcon:!0,shouldShowAudioIcon:!0}}).call(this,r("nrsj").default)},mmUd:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("zK28"),n=()=>!(!a.a.user||a.a.user.isVerified||0!==a.a.user.type&&3!==a.a.user.type)},qn7O:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r("yXV3"),r("4mDm"),r("ToJy"),r("FZtP"),r("3bBZ");var a=r("pVnL"),n=r.n(a),s=r("TSYQ"),i=r.n(s),o=r("bvRJ"),u=r("q1tI"),l=r.n(u);class d extends l.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.onClick(this.props.character,e)}}render(){return l.a.createElement("button",{className:"UISpecialCharacterButton UISpecialCharacterButton--"+this.props.variant+" TermText lang-"+this.props.lang,disabled:this.props.disabled,lang:this.props.lang,onClick:this.handleClick,type:"button",value:this.props.character},this.props.character)}}d.defaultProps={disabled:!1,variant:"default"};var c=r("z0Hl"),p=r("p5lF"),h=r("W6SY");function g(e,t){return Object(p.a)(e.character,t.character)}class m extends l.a.Component{constructor(){super(...arguments),this.state={isUppercase:!1},this.handleToggleUppercase=()=>{this.setState({isUppercase:!this.state.isUppercase})}}shouldComponentUpdate(e,t){if(!Object(h.a)(this.props,e,["charactersByLang"]))return!0;if(!Object(h.a)(this.state,t))return!0;if(Object.keys(this.props.charactersByLang).length!==Object.keys(e.charactersByLang).length)return!0;var r=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{if(!r){var a=this.props.charactersByLang[t],n=e.charactersByLang[t];n?(a.length!==n.length&&(r=!0),a=a.sort(),n=n.sort(),a.forEach(((e,t)=>{r||e!==n[t]&&(r=!0)}))):r=!0}})),r}getCharactersByLangToRender(){var e=[],t=[];return Object.keys(this.props.charactersByLang).forEach((r=>{this.props.charactersByLang[r].forEach((a=>{var n=this.state.isUppercase?a.toUpperCase():a;-1!==e.indexOf(n)||(e.push(n),t.push({character:n,lang:r}))}))})),t.sort(g)}renderAccents(){return this.getCharactersByLangToRender().map(((e,t)=>{var{character:r,lang:a}=e;return l.a.createElement("span",{className:"UISpecialCharacterButtonGroup-button",key:t},l.a.createElement(d,n()({character:r,lang:a,variant:this.props.variant},{onClick:this.props.onClickButton})))}))}renderUppercaseToggle(){return this.props.showUppercaseButtonInline?this.renderInlineUppercaseSwitch():this.renderUppercaseIcon()}renderInlineUppercaseSwitch(){return l.a.createElement("div",{className:"UISpecialCharacterButtonGroup-uppercaseSwitch"},l.a.createElement(c.a,{checked:this.state.isUppercase,onChange:this.handleToggleUppercase},l.a.createElement(o.a,{className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"})))}renderUppercaseIcon(){var e=i()("UISpecialCharacterButtonGroup-button","UISpecialCharacterButtonGroup-uppercaseButton","UISpecialCharacterButtonGroup-uppercaseButton--"+this.props.variant,{"is-enabled":this.state.isUppercase});return l.a.createElement("span",{className:e,onClick:this.handleToggleUppercase},l.a.createElement(o.a,{className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"}))}render(){return l.a.createElement("div",{className:"UISpecialCharacterButtonGroup"},this.renderAccents(),this.props.allowToggleUppercase&&this.hasDifferentUppercaseCharacters()?this.renderUppercaseToggle():null)}hasDifferentUppercaseCharacters(){var e=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{e||this.props.charactersByLang[t].forEach((t=>{e||t!==t.toUpperCase()&&(e=!0)}))})),e}}m.defaultProps={allowToggleUppercase:!1,showUppercaseButtonInline:!1,variant:"default"}},qxWM:function(e,t,r){"use strict";r("yXV3"),r("FZtP");var a=r("lCv/"),n=r("qiyg"),s=r("N4t/"),i=r("PqR9"),o={containsAccentLanguage:e=>Object(s.a)(e).some((e=>e in a&&a[e].length>0)),containsHardLanguage:e=>Object(s.a)(e).some((e=>n.hardLanguages.indexOf(e)>-1)),getCharactersByLangForLangs(e){var t={};return Object(i.a)(e).filter((e=>e)).forEach((e=>{t[e]=a[e]||[]})),t}};t.a=o},rfz2:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("q1tI");function n(e){var{className:t,component:r,dangerouslySetInnerHTML:n}=e;return Object(a.createElement)(r,{className:t,dangerouslySetInnerHTML:n})}n.defaultProps={component:"div"}},w2yL:function(e,t,r){"use strict";r("5s+n");var a=r("mr8R");t.a=Object(a.a)((()=>Promise.all([r.e("common"),r.e("set_term_lazy")]).then(r.bind(null,"4CRz"))),{withSpinner:!0})},"wLt/":function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return S}));r("4mDm"),r("Rm1S"),r("EnZy"),r("3bBZ");var a=r("pVnL"),n=r.n(a),s=r("TSYQ"),i=r.n(s),o=r("jiwd"),u=r("q1tI"),l=r.n(u),d=r("4HzQ"),c=r.n(d),p=r("kNXE"),h=r("+IfW"),g=/\*([^*\n\r]+)\*/g,m=/\*[^*\n\r]+\*/g,_=/(\r\n|\n\r|\r|\n)/,f=o.a.WORD_SIDE,S=o.a.DEFINITION_SIDE;class v extends l.a.PureComponent{constructor(){super(...arguments),this.getJsxFromStr=e=>{var t=e;this.props.maxLength&&(t=Object(h.a)(t,this.props.maxLength));var r=0;return t.split(_).map((e=>e.match(_)?l.a.createElement("br",{key:"key-"+r++}):"math"!==this.props.lang&&"chem"!==this.props.lang?function(e){var t=e.split(m),r=[],a=0;t[a]&&r.push(t[a]),a+=1;for(var n=g.exec(e);n;)r.push(l.a.createElement("b",{key:"md-"+a},n[1])),t[a]&&r.push(t[a]),a++,n=g.exec(e);return r}(e):e))},this.renderRichText=e=>l.a.createElement(p.a,{allowRtl:this.props.allowRtl,lang:this.props.lang,pmJson:e}),this.renderText=()=>{if(this.props.side===f)return this.props.shouldShowRichText&&this.props.term.wordRichText?this.renderRichText(this.props.term.wordRichText):this.getJsxFromStr(this.props.term.word||"...");if(this.props.shouldShowRichText&&this.props.term.definitionRichText)return this.renderRichText(this.props.term.definitionRichText);var{definition:e}=this.props.term;return e||this.props.term._imageUrl||(e="..."),this.getJsxFromStr(e)}}render(){var e=i()("TermText","notranslate",this.props.className,"lang-"+this.props.lang);if(this.props.textfit){var t="boolean"==typeof this.props.textfit?{}:this.props.textfit;return l.a.createElement(c.a,n()({className:e},t),this.renderText())}return l.a.createElement("span",{className:e},this.renderText())}}t.c=v}}]);