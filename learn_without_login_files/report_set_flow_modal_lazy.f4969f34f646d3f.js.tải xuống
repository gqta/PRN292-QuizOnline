(window.QJP=window.QJP||[]).push([["report_set_flow_modal_lazy"],{"0qdk":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r,s=n("mEm4");!function(e){e[e.NONE=0]="NONE",e[e.SHOULD_REQUEST=1]="SHOULD_REQUEST",e[e.AWAITING_RESPONSE=2]="AWAITING_RESPONSE",e[e.SUCCESS=3]="SUCCESS",e[e.TIMEOUT=4]="TIMEOUT",e[e.SERVER_ERROR=5]="SERVER_ERROR"}(r||(r={}));var a=Object(s.a)("REPORT_MODAL",{UPDATE_ANSWER:null,UPDATE_ASYNC_REQUEST_STATUS:null,UPDATE_REASON:null,UPDATE_SHOW_ASYNC_STATUS:null,POP_PANEL:null,PUSH_PANEL:null,SUBMIT_PANEL:null})},"36r5":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("dxfC"),s=n("9FQb"),a=n("q1tI"),o=n.n(a),i=n("Vm2m");class l extends a.PureComponent{UNSAFE_componentWillMount(){Object(i.a)(this.props.initialPanelKey)}render(){return o.a.createElement(r.a,{headerContent:this.props.headerContent,isOpen:this.props.isOpen,onClose:this.props.onClose},o.a.createElement(s.a,{getNextStep:this.props.getNextStep,getPanelFromKey:this.props.getPanelFromKey,imageIds:this.props.imageIds,isReportingFlowBlocked:this.props.isReportingFlowBlocked,modelId:this.props.modelId,modelType:this.props.modelType}))}}},"8wS+":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n("36r5"),s=n("t1Ez"),a=n("og3H"),o=n("q1tI"),i=n.n(o),l=n("IAI4");class p extends o.PureComponent{render(){return i.a.createElement(r.a,{getNextStep:l.a.getNextStep,getPanelFromKey:l.a.getPanelFromKey,headerContent:i.a.createElement(s.a,{id:"reporting_flow.set.title"}),initialPanelKey:l.a.initialPanelKey,isOpen:this.props.isOpen,isReportingFlowBlocked:this.props.isReportingFlowBlocked,modelId:this.props.modelId,modelType:a.D.SET,onClose:this.props.onClose})}}},"9FQb":function(e,t,n){"use strict";var r=n("pn57"),s=n("Vg22"),a=n("og3H"),o=n("yXPU"),i=n.n(o),l=n("SQJ4");class p extends l.a{static report(e){return i()((function*(){var t=yield p.post(e);return t&&t.length&&t[0]&&t[0].data&&t[0].data.userReport?t[0].data.userReport:null}))()}}p.URL_BASE="report",p.API_VERSION="3.2",p.CACHE=!1,p.ALLOW_MULTIPLE_REQUESTS=!1,p.REQUEST_TIMEOUT_LIMIT_MS=25e3;var u=n("YDJX"),c=n("0qdk"),_=n("T3U7"),h=Object(u.createAction)(c.a.UPDATE_ANSWER),d=Object(u.createAction)(c.a.UPDATE_ASYNC_REQUEST_STATUS),g=Object(u.createAction)(c.a.UPDATE_REASON),E=Object(u.createAction)(c.a.UPDATE_SHOW_ASYNC_STATUS),A=Object(u.createAction)(c.a.POP_PANEL),S=Object(u.createAction)(c.a.PUSH_PANEL),y=e=>t=>{t(d(c.b.AWAITING_RESPONSE)),p.report(e).then((e=>t(d(e?c.b.SUCCESS:c.b.SERVER_ERROR))),(e=>t(d(null!=e&&e.timeout?c.b.TIMEOUT:c.b.SERVER_ERROR))))},m=e=>t=>{var n=e.getNextStep(e.panelKey,e.answers);if(n){t(E(n.showAsyncStatus||!1)),t(g(n.reason)),t(S(n.panel));var r=!1;if(n.reason&&null===e.prevReason){r=!0;var s=((e,t,n)=>{for(var r={},s=0;s<n.size;s++){var o=e(n.get(s));if(o.type===a.hb.QUESTION)for(var i=0;i<o.questions.length;i++){var l=o.questions[i].key;r[l]=t.get(l)}}return r})(e.getPanelFromKey,e.answers,e.history);e.modelType===a.D.IMAGE&&null!==e.sideText?t(y({answers:s,modelType:e.modelType,modelId:e.modelId,reason:n.reason,sideText:e.sideText,imageUrl:e.imageUrl,page:e.page})):t(y({answers:s,modelType:e.modelType,modelId:e.modelId,reason:n.reason}))}var o={modelType:e.modelType,modelId:e.modelId,panel:n.panel,reason:void 0};r?(o.reason=n.reason,Object(_.a)("finish_reporting_flow",o)):Object(_.a)("continue_reporting_flow",o)}},b=n("peh1"),I=e=>e.get("history"),T=(Object(b.createSelector)(I,(e=>e.last())),n("oQF3")),w=n("FdmV"),R=Object(w.a)("reportingFlow",{answers:e=>e.get("answers"),history:I,reason:e=>e.get("reason"),requestStatus:e=>e.get("requestStatus"),showAsyncStatus:e=>e.get("showAsyncStatus")});t.a=Object(s.connect)(R,(e=>({actions:Object(r.bindActionCreators)({onGoBack:A,onUpdateAnswer:h,onSubmitPanel:m},e)})))(T.a)},FdmV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("peh1");function s(e,t){return Object(r.createSelector)((t=>t.get(e)),((e,t)=>t),(e=>e),Object(r.createStructuredSelector)(t))}},IAI4:function(e,t,n){"use strict";(function(e){var r=n("og3H"),s={};s[r.cb.WHAT_IS_WRONG]={type:r.ib.RADIO,key:r.cb.WHAT_IS_WRONG,question:e("reporting_flow.set.questions.what_is_wrong.question"),options:[{key:r.bb.INACCURATE,text:e("reporting_flow.set.questions.what_is_wrong.options.inaccurate")},{key:r.bb.INAPPROPRIATE,text:e("reporting_flow.set.questions.what_is_wrong.options.inappropriate")},{key:r.bb.CHEATING,text:e("reporting_flow.set.questions.what_is_wrong.options.cheating")},{key:r.bb.INTELLECTUAL_PROPERTY,text:e("reporting_flow.set.questions.what_is_wrong.options.intellectual_property")}]},s[r.cb.WHY_INAPPROPRIATE]={type:r.ib.RADIO,key:r.cb.WHY_INAPPROPRIATE,question:e("reporting_flow.set.questions.why_inappropriate.question"),options:[{key:r.W.BAD_LANGUAGE,text:e("reporting_flow.general.questions.why_inappropriate.options.bad_language")},{key:r.W.MATURE,text:e("reporting_flow.general.questions.why_inappropriate.options.mature")},{key:r.W.SEXUALLY_EXPLICIT,text:e("reporting_flow.general.questions.why_inappropriate.options.sexually_explicit")},{key:r.W.HARASS_BULLY_OR_HATE,text:e("reporting_flow.general.questions.why_inappropriate.options.harass_bully_or_hate")},{key:r.W.SUICIDAL,text:e("reporting_flow.general.questions.why_inappropriate.options.suicidal")},{key:r.W.CHAT,text:e("reporting_flow.general.questions.why_inappropriate.options.chat")},{key:r.W.SPAM,text:e("reporting_flow.general.questions.why_inappropriate.options.spam")},{key:r.W.OTHER,text:e("reporting_flow.general.questions.why_inappropriate.options.other")}]},s[r.cb.WHY_INAPPROPRIATE_OTHER]={type:r.ib.RADIO,key:r.cb.WHY_INAPPROPRIATE_OTHER,question:e("reporting_flow.set.questions.why_inappropriate.question"),options:[{key:r.X.VIOLENT_THREATENING_OR_SELF_HARM,text:e("reporting_flow.general.questions.why_inappropriate_other.options.violent_threatening_or_self_harm")},{key:r.X.PHISHING,text:e("reporting_flow.general.questions.why_inappropriate_other.options.phishing")},{key:r.X.PRIVACY_VIOLATION,text:e("reporting_flow.general.questions.why_inappropriate_other.options.privacy_violation")}]},s[r.cb.WHOSE_PRIVACY]={type:r.ib.RADIO,key:r.cb.WHOSE_PRIVACY,question:e("reporting_flow.general.questions.whose_privacy.question"),options:[{key:r.V.MINE,text:e("reporting_flow.general.questions.whose_privacy.options.mine")},{key:r.V.SOMEONE_ELSE,text:e("reporting_flow.general.questions.whose_privacy.options.someone_else")}]},s[r.cb.WHAT_PRIVATE_INFO]={type:r.ib.RADIO,key:r.cb.WHAT_PRIVATE_INFO,question:e("reporting_flow.set.questions.what_private_info.question"),options:[{key:r.U.PII,text:e("reporting_flow.general.questions.what_private_info.options.pii")},{key:r.U.IMAGES,text:e("reporting_flow.general.questions.what_private_info.options.images")},{key:r.U.OTHER,text:e("reporting_flow.general.questions.what_private_info.options.other")}]},s[r.cb.PRIVACY_DETAILS]={type:r.ib.TEXT,key:r.cb.PRIVACY_DETAILS,question:e("reporting_flow.general.questions.privacy_details.question"),placeholder:e("reporting_flow.general.questions.privacy_details.placeholder")};var a="what_is_wrong",o="why_inappropriate",i="why_inappropriate_other",l="privacy",p="thanks",u="ugc",c="test_bank",_="dmca",h="thanks_suicidal",d=e=>e.map((e=>s[e])),g={};g[a]={key:a,type:r.hb.QUESTION,questions:d([r.cb.WHAT_IS_WRONG])},g[o]={key:o,type:r.hb.QUESTION,questions:d([r.cb.WHY_INAPPROPRIATE])},g[i]={key:i,type:r.hb.QUESTION,questions:d([r.cb.WHY_INAPPROPRIATE_OTHER])},g[l]={key:l,type:r.hb.QUESTION,questions:d([r.cb.WHOSE_PRIVACY,r.cb.WHAT_PRIVATE_INFO,r.cb.PRIVACY_DETAILS])},g[p]={key:p,type:r.hb.MESSAGE,message:e("reporting_flow.general.messages.thanks.body"),buttons:[{title:e("reporting_flow.general.messages.thanks.buttons.home"),url:"/latest",mobileHandler:!1}]},g[u]={key:u,type:r.hb.MESSAGE,message:e("reporting_flow.general.messages.ugc.body"),buttons:[{title:e("reporting_flow.general.messages.ugc.buttons.typos_faq"),url:"/help/2444157/how-do-i-report-a-typo-in-a-set",newTab:!0}]},g[c]={key:c,type:r.hb.MESSAGE,message:e("reporting_flow.set.messages.test_bank.body"),buttons:[{title:e("reporting_flow.set.messages.test_bank.buttons.report_test_bank"),url:"/testbank/request",newTab:!0}]},g[_]={key:_,type:r.hb.MESSAGE,message:e("reporting_flow.general.messages.dmca.body"),buttons:[{title:e("reporting_flow.general.messages.dmca.buttons.dmca_policy"),url:"/dmca",newTab:!0}]},g[h]={key:h,type:r.hb.MESSAGE,message:e("reporting_flow.general.messages.thanks_suicidal.body"),buttons:[{title:e("reporting_flow.general.messages.thanks_suicidal.buttons.self_harm_help_center"),url:"/help/2444162/self-harm-prevention-and-user-safety",newTab:!0},{key:"home",title:e("reporting_flow.general.messages.thanks_suicidal.buttons.home"),url:"/latest",mobileHandler:!1}]};var E={initialPanelKey:a,getPanelFromKey:e=>g[e],getNextStep(e,t){switch(e){case a:switch(t.get(r.cb.WHAT_IS_WRONG)){case r.bb.INACCURATE:return{panel:u,reason:r.ab.INACCURATE,showAsyncStatus:!1};case r.bb.INAPPROPRIATE:return{panel:o,reason:null};case r.bb.CHEATING:return{panel:c,reason:r.ab.CHEATING,showAsyncStatus:!1};case r.bb.INTELLECTUAL_PROPERTY:return{panel:_,reason:r.ab.INTELLECTUAL_PROPERTY,showAsyncStatus:!1}}break;case o:switch(t.get(r.cb.WHY_INAPPROPRIATE)){case r.W.OTHER:return{panel:i,reason:null};case r.W.BAD_LANGUAGE:return{panel:p,reason:r.ab.BAD_LANGUAGE,showAsyncStatus:!0};case r.W.MATURE:return{panel:p,reason:r.ab.MATURE,showAsyncStatus:!0};case r.W.SEXUALLY_EXPLICIT:return{panel:p,reason:r.ab.SEXUALLY_EXPLICIT,showAsyncStatus:!0};case r.W.HARASS_BULLY_OR_HATE:return{panel:p,reason:r.ab.HARASS_BULLY_OR_HATE,showAsyncStatus:!0};case r.W.SUICIDAL:return{panel:h,reason:r.ab.SUICIDAL,showAsyncStatus:!0};case r.W.CHAT:return{panel:p,reason:r.ab.CHAT,showAsyncStatus:!0};case r.W.SPAM:return{panel:p,reason:r.ab.SPAM,showAsyncStatus:!0}}break;case i:switch(t.get(r.cb.WHY_INAPPROPRIATE_OTHER)){case r.X.PRIVACY_VIOLATION:return{panel:l,reason:null};case r.X.VIOLENT_THREATENING_OR_SELF_HARM:return{panel:p,reason:r.ab.VIOLENT_THREATENING_OR_SELF_HARM,showAsyncStatus:!0};case r.X.PHISHING:return{panel:p,reason:r.ab.PHISHING,showAsyncStatus:!0}}break;case l:return{panel:p,reason:r.ab.PRIVACY_VIOLATION,showAsyncStatus:!0}}return null}};t.a=E}).call(this,n("nrsj").default)},Vm2m:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("JPcv"),s=n("YDJX"),a=n("xhj2"),o=n("0qdk"),i={[o.a.UPDATE_ANSWER]:(e,t)=>{var{payload:n}=t,r=n.question,s=n.answer;return e.setIn(["answers",r],s)},[o.a.UPDATE_ASYNC_REQUEST_STATUS]:(e,t)=>e.set("requestStatus",t.payload),[o.a.UPDATE_REASON]:(e,t)=>e.set("reason",t.payload),[o.a.UPDATE_SHOW_ASYNC_STATUS]:(e,t)=>e.set("showAsyncStatus",t.payload),[o.a.POP_PANEL]:e=>{var t=e.get("history");return t.size>1?e.merge(Object(r.fromJS)({history:t.pop()})):e},[o.a.PUSH_PANEL]:(e,t)=>e.set("history",e.get("history").push(t.payload))};function l(e){var t=Object(s.handleActions)(i,(e=>Object(r.fromJS)({answers:{},history:[e],reason:null,requestStatus:null,showAsyncStatus:!0}))(e));a.a.register({reportingFlow:t})}},"iD+L":function(e,t,n){"use strict";n.r(t)},oQF3:function(e,t,n){"use strict";(function(e){n("4mDm"),n("zKZe"),n("SYor"),n("3bBZ");var r=n("t1Ez"),s=n("JxFz"),a=n("Pxp3"),o=n("vlgG"),i=n("47yS"),l=n("mM5Q"),p=n("zt8I"),u=n("wcmh"),c=n("OpqZ"),_=n("og3H"),h=n("JPcv"),d=n("welx"),g=n("q1tI"),E=n.n(g),A=n("0qdk"),S=Object(d.styled)("div")({name:"ImageCarouselContainer",class:"ivav9py"}),y=Object(d.styled)("img")({name:"ImageCarousel",class:"ilv83ip"}),m=Object(d.styled)("div")({name:"ImageSection",class:"ilqdo50"}),b=Object(d.styled)("p")({name:"ImageSelectionTitle",class:"ieyg9jv"}),I=Object(d.styled)("div")({name:"ButtonSection",class:"b1n5whmq"}),T=Object(d.styled)("div")({name:"QuestionPanel",class:"q1oy0yfs"});class w extends E.a.PureComponent{constructor(){super(...arguments),this.state={optionSelected:0},this.handleUpdateAnswer=e=>{var t=e.target.value,n=e.target.name;this.props.actions.onUpdateAnswer({question:n,answer:t})},this.handleSubmitPanel=()=>{var e={panelKey:this.getCurrentPanelKey(),answers:this.props.answers,getPanelFromKey:this.props.getPanelFromKey,getNextStep:this.props.getNextStep,history:this.props.history,prevReason:this.props.reason,modelType:this.props.modelType,modelId:this.props.modelId};if(this.isImageReport()){var t=this.getImageSelected();this.props.actions.onSubmitPanel(Object.assign({},e,{modelId:null==t?void 0:t.id,sideText:null==t?void 0:t.sideText,imageUrl:null==t?void 0:t.url,page:null==t?void 0:t.page}))}else this.props.actions.onSubmitPanel(e)},this.handleImageSelection=e=>{var t=Number(e.target.value);this.setState({optionSelected:t})}}getCurrentPanel(){return this.props.getPanelFromKey(this.getCurrentPanelKey())}getCurrentPanelKey(){return this.props.history.last()}getImageId(){return this.state.optionSelected}getImageSelected(){var e;return null==(e=this.props.imageIds)?void 0:e.find((e=>e.id===this.getImageId()))}getTextAnswerFor(e){var t=this.props.answers.get(e);return void 0===t?"":t}renderBackButton(){return E.a.createElement(s.a,{"aria-label":e("reporting_flow.navigation.back_button"),onClick:this.props.actions.onGoBack},E.a.createElement(r.a,{id:"reporting_flow.navigation.back_button"}))}renderContinueButton(){return E.a.createElement(s.a,{"aria-label":e("reporting_flow.navigation.continue_button"),disabled:this.shouldDisableContinueButton(),onClick:this.handleSubmitPanel},E.a.createElement(r.a,{id:"reporting_flow.navigation.continue_button"}))}renderImageSelection(){if(this.isImageReport()){var e=this.props.imageIds||[],t=this.state.optionSelected;return E.a.createElement(S,null,e.map((e=>E.a.createElement(u.a,{checked:e.id===t,key:e.id,label:E.a.createElement(y,{alt:e.sideText,src:e.url}),onChange:this.handleImageSelection,value:e.id}))))}return null}renderQuestionPanel(e){var t=e.questions;return E.a.createElement(T,null,this.renderImageSection(),this.renderQuestions(t),E.a.createElement(I,null,this.shouldShowBackButton()?this.renderBackButton():null,this.renderContinueButton()))}renderImageSection(){return this.isImageReport()?E.a.createElement(m,null,this.renderImageSelectionTitle(),this.renderImageSelection()):null}renderQuestions(e){return e.map(((t,n)=>E.a.createElement(c.a,{key:t.key},n>0&&e[n-1].type===_.ib.RADIO&&t.type===_.ib.RADIO?E.a.createElement(l.a,null):null,this.renderQuestion(t))))}renderQuestion(e){return e.type===_.ib.RADIO?this.renderRadioQuestion(e):this.renderTextQuestion(e)}renderRadioQuestion(e){return E.a.createElement(a.a,null,this.renderQuestionTitle(e),this.renderQuestionOptions(e))}renderQuestionOptions(e){return e.options.map((t=>E.a.createElement(c.a,{key:t.key},E.a.createElement(u.a,{checked:t.key===this.props.answers.get(e.key),label:t.text,name:""+e.key,onChange:this.handleUpdateAnswer,value:t.key}))))}renderTextQuestion(e){return E.a.createElement(a.a,null,E.a.createElement(o.a,{label:e.question,name:""+e.key,onChange:this.handleUpdateAnswer,placeholder:e.placeholder,type:"autoExpand",value:this.getTextAnswerFor(e.key)}))}renderImageSelectionTitle(){return E.a.createElement(b,null,e("reporting_flow.image.questions.which_image.question"))}renderQuestionTitle(e){return E.a.createElement(p.a,null,e.question)}renderPanel(e){switch(e.type){case _.hb.QUESTION:return this.renderQuestionPanel(e);default:return this.renderMessagePanel(e)}}renderMessagePanel(e){return E.a.createElement(c.a,null,this.renderResult(e),e.buttons?this.renderMessagePanelButtons(e):null)}renderResult(e){if(!this.props.showAsyncStatus)return this.renderMessage(e);switch(this.props.requestStatus){case A.b.AWAITING_RESPONSE:return E.a.createElement(i.a,null);case A.b.TIMEOUT:return E.a.createElement(p.a,null,E.a.createElement(r.a,{id:"reporting_flow.general.errors.timeout"}));case A.b.SERVER_ERROR:return E.a.createElement(p.a,null,E.a.createElement(r.a,{id:"reporting_flow.general.errors.server"}));case A.b.SUCCESS:return this.renderMessage(e);default:return null}}renderMessage(e){return E.a.createElement(p.a,null,e.message)}renderMessagePanelButtons(e){return E.a.createElement(p.a,null,e.buttons.map((e=>{if(this.props.isMobileWebView&&void 0!==e.mobileHandler){if(!1===e.mobileHandler)return null;var t=!0===e.mobileHandler?void 0:e.mobileHandler;return E.a.createElement(s.a,{"aria-label":e.title,key:e.url,onClick:t},e.title)}return E.a.createElement(s.a,{"aria-label":e.title,key:e.url,linkTo:e.url,linkToNewTab:!this.props.isMobileWebView&&!!e.newTab},e.title)})))}render(){if(this.props.isReportingFlowBlocked)return E.a.createElement(p.a,null,E.a.createElement(r.a,{id:"reporting_flow.general.errors.blocked"}));var e=this.getCurrentPanel();return E.a.createElement("div",{className:"ReportModal-main"},this.renderPanel(e))}isImageReport(){return this.props.modelType===_.D.IMAGE}shouldDisableContinueButton(){for(var e=this.getCurrentPanel(),t=this.props.answers,n=!!this.state.optionSelected,r=!0,s=!1,a=0;a<e.questions.length;a++){var o=e.questions[a].key;switch(e.questions[a].type){case _.ib.RADIO:if(void 0===t.get(o)||null===t.get(o))return!0;r=!1;break;case _.ib.TEXT:""===this.getTextAnswerFor(o).trim()&&(s=!0)}}return this.isImageReport()?s||!n:r&&s}shouldShowBackButton(){return this.props.history.size>1}}w.defaultProps={answers:Object(h.Map)(),isMobileWebView:!1,isReportingFlowBlocked:!1,reason:null,requestStatus:A.b.NONE,showAsyncStatus:!0},t.a=w,n("iD+L")}).call(this,n("nrsj").default)}}]);